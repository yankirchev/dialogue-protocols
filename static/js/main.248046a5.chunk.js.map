{"version":3,"sources":["Background.js","DialogueAccordion.js","protocols/Agent.js","protocols/utils/helper.js","protocols/Dialogue.js","protocols/PersuasionDialogue.js","protocols/DeliberationDialogue.js","protocols/utils/generalKnowledgeBase.js","protocols/Simulation.js","Generate.js","DemoDialogue.js","Home.js","App.js","serviceWorker.js","index.js"],"names":["Background","react_default","a","createElement","className","StructuredList","head","noWrap","OrderedList","ListItem","Component","DialogueAccordion","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","state","accordionItems","currentSpeechActIndex","decrementSpeechActIndex","bind","assertThisInitialized","incrementSpeechActIndex","maximiseSpeechActIndex","setState","props","dialogue","commitmentStoreHistory","length","_this2","text","split","map","speechAct","speechActIndex","AccordionItem","key","title","UnorderedList","agents","agent","agentIndex","name","nested","commitment","commitmentIndex","dialogueType","agreedPreferenceRuleHistory","Accordion","slice","Button","small","kind","disabled","onClick","Agent","initialPreference","knowledgeBase","commitmentStore","restaurant","preferredRestaurants","prologSession","pl","create","consult","query","answers","x","push","format_answer","includes","camelise","string","replace","match","index","toLowerCase","toUpperCase","decamelise","format","justifications","_step","formattedText","_iterator","_createForOfIteratorHelper","entries","s","n","done","_ref3","value","_ref2","slicedToArray","justification","concat","translate","err","e","f","term","property","cost","translation","Dialogue","constructor","TypeError","newCommitmentStoresRecord","Dialogue_createForOfIteratorHelper","answer","Error","_step2","_iterator2","anyAgent","saveCommitmentStores","_step3","_iterator3","_step4","doesAppear","_iterator4","someAgent","_step5","_iterator5","substring","otherAgent","_step6","_iterator6","_step7","justificationsAsOneString","_iterator7","_step8","_iterator8","_step9","_iterator9","_step10","bodyOfRuleOfClaim","_iterator10","_loop","_step11","_iterator11","PersuasionDialogue","proponentIndex","proponent","PersuasionDialogue_createForOfIteratorHelper","doesPrefer","termsToCheck","line","test","m","i","RegExp","_step12","_iterator12","_step13","_iterator13","_step14","_iterator14","_step15","_iterator15","_step18","_iterator18","_step16","_iterator16","_step17","_iterator17","_step19","_iterator19","_step20","_iterator20","_step21","_iterator21","_step24","_iterator24","_step22","_iterator22","_step23","_iterator23","_step25","_iterator25","DeliberationDialogue","agreedPreferenceRule","get","prototype","collectiveCommitmentStore","DeliberationDialogue_createForOfIteratorHelper","agreedRestaurant","addTermToAgreedPreferenceRule","doesAppearGlobally","doesAppearLocally","uninstatitatedJustifications","generalKnowledgeBase","Simulation","agentNames","restaurantNames","restaurantCuisines","beverage","persuasionDialogue","simulatePersuasionDialogue","deliberationDialogue","simulateDeliberationDialogue","knowledgeBaseOne","knowledgeBaseTwo","knowledgeBaseThree","Simulation_createForOfIteratorHelper","claim","counterclaim","question","concede","isOver","_ref6","_ref5","concedeSince","Generate","firstAgentsName","secondAgentsName","thirdAgentsName","isFirstAgentsNameInvalid","isSecondAgentsNameInvalid","isThirdAgentsNameInvalid","firstRestaurantsName","secondRestaurantsName","thirdRestaurantsName","isFirstRestaurantsNameInvalid","isSecondRestaurantsNameInvalid","isThirdRestaurantsNameInvalid","firstRestaurantsCuisine","secondRestaurantsCuisine","thirdRestaurantsCuisine","isErrorNotificationVisible","simulation","onChange","checkInputValues","generateDialogues","resetState","event","defineProperty","target","id","TextInput","labelText","invalid","invalidText","FormGroup","legendText","RadioButtonGroup","valueSelected","RadioButton","Notification","hideCloseButton","subtitle","src_DialogueAccordion_0","DemoDialogue","Tooltip","triggerText","Home","src_DemoDialogue_0","App","switchIndex","window","open","focus","ContentSwitcher","Switch","hidden","src_Home_0","src_Background_0","src_Generate_0","Link","href","Boolean","location","hostname","ReactDOM","render","src_App_0","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"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","file":"static/js/main.248046a5.chunk.js","sourcesContent":["import React, { Component } from 'react';\n\nimport { ListItem, OrderedList, StructuredListBody, StructuredListCell, StructuredListHead, StructuredListRow, StructuredListWrapper } from 'carbon-components-react';\n\nimport './Background.css';\n\nclass Background extends Component {\n  render() {\n    return (\n      <div>\n        <div className=\"bx--row\">\n          <div className=\"bx--offset-md-1 bx--col-md-10 bx--offset-xl-2 bx--col-xl-8\">\n            <div className=\"heading\"></div>\n            <h2 className=\"heading\">Purpose</h2>\n          </div>\n        </div>\n        <div className=\"bx--row\">\n          <div className=\"bx--offset-md-1 bx--col-md-10 bx--offset-xl-2 bx--col-xl-8\">\n            <p>\n              Diners' Discourse is a web application developed by Yanko Kirchev in 2019\n              as part of his Honours Year Computer Science Project—<em>Implementing Dialogue Protocols</em>—to\n              earn the degree of B.Sc. (Hons) Computer Science with Year in Industry\n              at the Department of Computer Science at the University of Liverpool.\n            </p>\n            <p className=\"not-first\">\n              The application implements dialogue protocols for multi-agent systems\n              based on the characterisations of persuasion and deliberation dialogues\n              established by Atkinson, Bench-Capon, and Walton [2],\n              which draw out the distinctive features of the two types.\n            </p>\n            <p className=\"not-first\">\n              Diners' Discourse uses the protocols to generate custom persuasion and deliberation dialogues,\n              which are parallel to the ones laid out in [2],\n              and verifies that the protocols exhibit the expected behaviour when they are put to practice.\n            </p>\n          </div>\n        </div>\n        <div className=\"bx--row\">\n          <div className=\"bx--offset-md-1 bx--col-md-10 bx--offset-xl-2 bx--col-xl-8\">\n            <div className=\"heading\"></div>\n            <h2 className=\"heading\">Implementation</h2>\n          </div>\n        </div>\n        <div className=\"bx--row\">\n          <div className=\"bx--offset-md-1 bx--col-md-10 bx--offset-xl-2 bx--col-xl-8\">\n            <p>\n              The application is developed using the Node.js and React.js frameworks.\n              The protocols rely heavily on the Tau Prolog module—a Prolog interpreter written entirely in JavaScript—\n              which brings the required support for knowledge representation to Diners' Discourse.\n            </p>\n            <p className=\"not-first\">\n              On the front-end's side, Carbon Design's React.js components are utilised,\n              which allowed for the efficient construction of an intuitive and responsive web interface.\n            </p>\n          </div>\n        </div>\n        <div className=\"bx--row\">\n          <div className=\"bx--offset-md-1 bx--col-md-10 bx--offset-xl-2 bx--col-xl-8\">\n            <div className=\"heading\"></div>\n            <h2 className=\"heading\">Glossary</h2>\n          </div>\n        </div>\n        <div className=\"bx--row\">\n          <div className=\"bx--offset-md-1 bx--col-md-10 bx--offset-xl-2 bx--col-xl-8\">\n            <StructuredListWrapper className=\"structured-list\">\n              <StructuredListHead>\n                <StructuredListRow head>\n                  <StructuredListCell head>Term</StructuredListCell>\n                  <StructuredListCell head>Definition</StructuredListCell>\n                </StructuredListRow>\n              </StructuredListHead>\n              <StructuredListBody>\n                <StructuredListRow>\n                  <StructuredListCell noWrap>Agent</StructuredListCell>\n                  <StructuredListCell>\n                    An autonomous computer entity that learns and uses knowledge\n                    to execute independent actions towards achieving goals [1].\n                  </StructuredListCell>\n                </StructuredListRow>\n                <StructuredListRow>\n                  <StructuredListCell>Commitment Store</StructuredListCell>\n                  <StructuredListCell>\n                    A set of statements to which an agent becomes committed\n                    in the course of a dialogue [2].\n                  </StructuredListCell>\n                </StructuredListRow>\n                <StructuredListRow>\n                  <StructuredListCell>Deliberation dialogue</StructuredListCell>\n                  <StructuredListCell>\n                    A dialogue in which deliberation arises from a dilemma\n                    about what option is collectively acceptable\n                    where each party tries to find the best available course of action\n                    for the group as a whole [3].\n                  </StructuredListCell>\n                </StructuredListRow>\n                <StructuredListRow>\n                  <StructuredListCell>Persuasion dialogue</StructuredListCell>\n                  <StructuredListCell>\n                    A dialogue in which persuasion arises from a conflict of opinions\n                    on what the best available choice of action is\n                    where one party tries to persuade the other(s)\n                    towards their preferred option [3].\n                  </StructuredListCell>\n                </StructuredListRow>\n                <StructuredListRow>\n                  <StructuredListCell noWrap>Post-conditions</StructuredListCell>\n                  <StructuredListCell>\n                    A set of conditions that state the updates on the agents’ commitment stores\n                    that occur immediately after the execution of a speech act [2].\n                  </StructuredListCell>\n                </StructuredListRow>\n                <StructuredListRow>\n                  <StructuredListCell noWrap>Pre-conditions</StructuredListCell>\n                  <StructuredListCell>\n                    A set of conditions that determine the prerequisites that need to be satisfied\n                    in terms of available knowledge and prior commitments\n                    in order for a speech act to be used legally [2].\n                  </StructuredListCell>\n                </StructuredListRow>\n                <StructuredListRow>\n                  <StructuredListCell>Protocol</StructuredListCell>\n                  <StructuredListCell>\n                    Rules by which a dialogue pans out. These can specify the allowed speech acts at any point,\n                    the effects of utterances on the participants’ commitments, the outcome of the dialogue,\n                    the turn-taking function, and the termination criteria [4].\n                  </StructuredListCell>\n                </StructuredListRow>\n                <StructuredListRow>\n                  <StructuredListCell noWrap>Speech acts</StructuredListCell>\n                  <StructuredListCell>\n                    A set of moves that agents participating in a dialogue can make in regard to statements.\n                    They comprise \"claim\", \"counterclaim\", \"why\", \"concede\", \"retract\", \"since\", \"concede-since\" and “question\".\n                  </StructuredListCell>\n                </StructuredListRow>\n              </StructuredListBody>\n            </StructuredListWrapper>\n          </div>\n        </div>\n        <div className=\"bx--row\">\n          <div className=\"bx--offset-md-1 bx--col-md-10 bx--offset-xl-2 bx--col-xl-8\">\n            <div className=\"heading\"></div>\n            <h2 className=\"heading\">References</h2>\n          </div>\n        </div>\n        <div className=\"bx--row\">\n          <div className=\"bx--offset-md-1 bx--col-md-10 bx--offset-xl-2 bx--col-xl-8\">\n            <OrderedList>\n              <ListItem className=\"list-item reference\">\n                S. Russell and P. Norvig, <em>Artificial Intelligence: A Modern Approach</em>,\n                2nd ed. Upper Saddle River, NJ: Pearson Prentice Hall, 2006.\n              </ListItem>\n              <ListItem className=\"list-item reference\">\n                K. Atkinson, T. Bench-Capon, and D. Walton,\n                “Distinctive features of persuasion and deliberation dialogues”,\n                <em>Argument and Computation</em>, vol. 4, no. 2, pp. 105-127, June 2013.\n               </ListItem>\n              <ListItem className=\"list-item reference\">\n                D. Walton and E. C. W. Krabbe,\n                <em>Commitment in Dialogue: Basic Concepts of Interpersonal Reasoning. </em>\n                Albany, NY: State University of New York Press, 1995.\n              </ListItem>\n              <ListItem className=\"list-item reference\">\n                H. Prakken, “Formal systems for persuasion dialogue”,\n                <em>The Knowledge Engineering Review</em>, vol. 21, no. 2, pp. 163–188, Aug. 2006\n              </ListItem>\n            </OrderedList>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default Background;\n","import React, { Component } from \"react\";\nimport { Accordion, AccordionItem, Button, ListItem, UnorderedList } from 'carbon-components-react';\n\nimport './DialogueAccordion.css';\n\nclass DialogueAccordion extends Component {\n  constructor() {\n    super();\n\n    this.state = {\n      accordionItems: null,\n      currentSpeechActIndex: 1\n    };\n\n    this.decrementSpeechActIndex = this.decrementSpeechActIndex.bind(this);\n    this.incrementSpeechActIndex = this.incrementSpeechActIndex.bind(this);\n    this.maximiseSpeechActIndex = this.maximiseSpeechActIndex.bind(this);\n  }\n\n  decrementSpeechActIndex() {\n    this.setState({\n      currentSpeechActIndex: this.state.currentSpeechActIndex - 1\n    });\n  }\n\n  incrementSpeechActIndex() {\n    this.setState({\n      currentSpeechActIndex: this.state.currentSpeechActIndex + 1\n    });\n  }\n\n  maximiseSpeechActIndex() {\n    this.setState({\n      currentSpeechActIndex: this.props.dialogue.commitmentStoreHistory.length\n    });\n  }\n\n  componentDidMount() {\n    this.setState({\n      accordionItems: this.props.dialogue.text.split('\\n').map((speechAct, speechActIndex) => speechAct !== '' && (\n        <AccordionItem key={speechActIndex} title={<div><strong>{speechAct.split(':')[0]}</strong>:{speechAct.split(':')[1]}</div>}>\n          <UnorderedList>\n            {this.props.dialogue.agents.map((agent, agentIndex) =>\n              <ListItem className=\"list-item\" key={agentIndex}>\n                {agent.name}'s commitment store:\n                <UnorderedList nested className=\"unordered-nested-list\">\n                  {this.props.dialogue.commitmentStoreHistory[speechActIndex][agentIndex].split('\\n').map((commitment, commitmentIndex) => commitment !== '' &&\n                    <ListItem className=\"nested-list-item\" key={commitmentIndex}>\n                      {commitment}\n                    </ListItem>\n                  )}\n                </UnorderedList>\n              </ListItem>\n            )}\n            {this.props.dialogueType === 'Deliberation' && (\n              <ListItem className=\"list-item\">\n                Agreed preference rule:\n                <UnorderedList nested className=\"unordered-nested-list\">\n                  <ListItem className=\"nested-list-item\">\n                    {this.props.dialogue.agreedPreferenceRuleHistory[speechActIndex]}\n                  </ListItem>\n                </UnorderedList>\n              </ListItem>\n            )}\n          </UnorderedList>\n        </AccordionItem>\n      ))\n    });\n  }\n\n  render() {\n    return (\n      <div>\n        <div className=\"heading\"></div>\n        <h2 className=\"heading\">{this.props.dialogueType} Dialogue</h2>\n        <Accordion className=\"dialogue-accordion\">\n          {this.state.accordionItems && this.state.accordionItems.slice(0, this.state.currentSpeechActIndex)}\n        </Accordion>\n        <div className=\"buttons-wrapper\">\n          <Button small kind='secondary' disabled={this.state.currentSpeechActIndex === 1} onClick={this.decrementSpeechActIndex}>\n            Previous\n          </Button>\n          <Button small kind='primary' disabled={this.state.currentSpeechActIndex === this.props.dialogue.commitmentStoreHistory.length} onClick={this.incrementSpeechActIndex}>\n            Next\n          </Button>\n          <Button small className=\"tertiary\" kind='tertiary' disabled={this.state.currentSpeechActIndex === this.props.dialogue.commitmentStoreHistory.length} onClick={this.maximiseSpeechActIndex}>\n            Reveal all\n          </Button>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default DialogueAccordion;\n","import pl from 'tau-prolog';\n\nclass Agent {\n  constructor(name, initialPreference, knowledgeBase) {\n    this.name = name;\n    this.initialPreference = initialPreference;\n    this.knowledgeBase = knowledgeBase;\n    this.commitmentStore = '';\n  }\n\n  doesPrefer(restaurant) {\n    const preferredRestaurants = [this.initialPreference];\n\n    const prologSession = pl.create();\n    prologSession.consult(this.knowledgeBase + this.commitmentStore);\n    prologSession.query('acceptableRestaurant(X).');\n    prologSession.answers(x => {\n      preferredRestaurants.push(pl.format_answer(x).split(\" \")[2]);\n    });\n\n    return preferredRestaurants.includes(restaurant);\n  }\n}\n\nexport default Agent;\n","function camelise(string) {\n  return string.replace(/[']/g, '').replace(/(?:^\\w|[A-Z]|\\b\\w|\\s+)/g, (match, index) => {\n    if (+match === 0) {\n      return '';\n    }\n\n    return index === 0 ? match.toLowerCase() : match.toUpperCase();\n  });\n}\n\nfunction decamelise(string) {\n  return string\n    .replace(/([a-z\\d])([A-Z])/g, '$1 $2')\n    .replace(/([A-Z]+)([A-Z][a-z\\d]+)/g, '$1 $2')\n    .toLowerCase();\n}\n\nfunction format(justifications) {\n  let formattedText = '';\n\n  for (const [index, justification] of justifications.entries()) {\n    if (justifications.length === 1) {\n      formattedText += `${translate(justification)}`;\n    } else if (index === justifications.length - 1) {\n      formattedText += `${translate(justification)}`;\n    } else if (index !== justifications.length - 2) {\n      formattedText += `${translate(justification)}, `;\n    } else if (justifications.length >= 3 && index === justifications.length - 2) {\n      formattedText += `${translate(justification)}, and `;\n    } else if (justifications.length < 3 && index === justifications.length - 2) {\n      formattedText += `${translate(justification)} and `;\n    }\n  }\n\n  return formattedText;\n}\n\nfunction translate(term) {\n  const restaurant = term.match(/([A-Za-z0-9_])+/g)[1];\n  const property = term.match(/([A-Za-z0-9])+/g)[0];\n  const value = term.match(/([A-Za-z0-9_])+/g)[2];\n  const cost = term.match(/([A-Za-z0-9_])+/g)[3];\n\n  let translation = '';\n\n  if (restaurant !== '_') {\n    if (term.includes('\\\\+(')) {\n      translation = `${decamelise(restaurant)} lacks property ${decamelise(property)}`;\n    } else {\n      translation = `${decamelise(restaurant)} has property ${decamelise(property)}`;\n    }\n  } else {\n    translation = `property ${decamelise(property)}`;\n  }\n\n  if (value && value !== '_') {\n    translation += ` of value ${decamelise(value)}`;\n\n    if (cost && cost !== '_') {\n      translation += ` and cost ${decamelise(cost)}`;\n    }\n  } else if (cost && cost !== '_') {\n    translation += ` of cost ${decamelise(cost)}`;\n  }\n\n  return translation;\n}\n\nexport {\n  camelise,\n  decamelise,\n  format,\n  translate\n};\n","import pl from 'tau-prolog';\n\nimport { format, translate } from './utils/helper';\n\nclass Dialogue {\n  constructor(agents) {\n    if (new.target === Dialogue) {\n      throw new TypeError('Cannot construct Dialogue instances directly!');\n    }\n\n    this.agents = agents;\n    this.text = `${agents[0].name}: Where shall we eat?\\n`;\n    this.commitmentStoreHistory = [['', '', '']];\n  }\n\n  saveCommitmentStores() {\n    const newCommitmentStoresRecord = [];\n\n    for (const agent of this.agents) {\n      newCommitmentStoresRecord.push(agent.commitmentStore);\n    }\n\n    this.commitmentStoreHistory.push(newCommitmentStoresRecord);\n  }\n\n  isOver() {\n    throw new TypeError('Need to implement function isOver!');\n  }\n\n  // Claim(ag_i, l)\n  claim(agent, term) {\n    /*  PRE-CONDITIONS */\n\n    // demo(∏_ag_i ∪ Com_ag_i, l)\n    const prologSession = pl.create();\n    prologSession.consult(agent.knowledgeBase + agent.commitmentStore);\n    prologSession.query(term);\n    prologSession.answer(x => {\n      if (pl.format_answer(x) !== 'true ;') {\n        throw new Error(`Pre-conditions of ${agent.name} claiming \"${translate(term)}\" are not satisfied because ` +\n          `the agent cannot demonstrate the claim through their knowledge base and commitment store!`);\n      }\n    });\n\n    // ¬l ∈ Com_ag_j for any ag_j ∈ Ag\n    for (const anyAgent of this.agents) {\n      if (anyAgent.commitmentStore.includes(term)) {\n        throw new Error(`Pre-conditions of ${agent.name} claiming \"${translate(term)}\" are not satisfied because ` +\n          `${anyAgent.name}'s commitment store contains the claim!`);\n      }\n    }\n\n    /* POST-CONDITIONS */\n\n    // Com_ag_i ⇒ Com_ag_i ∪ l\n    agent.commitmentStore += `${term}\\n`;\n\n    /* UPDATE DIALOGUE TEXT AND UPDATE COMMITMENT STORE HISTORY */\n\n    this.text += `${agent.name}: ${translate(term)}.\\n`;\n    this.saveCommitmentStores();\n  }\n\n  // Counterclaim(ag_i, l)\n  counterclaim(agent, term) {\n    /*  PRE-CONDITIONS */\n\n    // demo(∏_ag_i ∪ Com_ag_i, l)\n    const prologSession = pl.create();\n    prologSession.consult(agent.knowledgeBase + agent.commitmentStore);\n    prologSession.query(term);\n    prologSession.answer(x => {\n      if (pl.format_answer(x) !== 'true ;') {\n        throw new Error(`Pre-conditions of ${agent.name} counterclaiming \"${translate(term)}\" are not satisfied because ` +\n          `the agent cannot demonstrate the claim through their knowledge base and commitment store!`);\n      }\n    });\n\n    // ¬l ∈ Com_ag_j for any ag_j ∈ Ag\n    for (const anyAgent of this.agents) {\n      if (anyAgent.commitmentStore.includes(term)) {\n        throw new Error(`Pre-conditions of ${agent.name} counterclaiming \"${translate(term)}\" are not satisfied because ` +\n          `${anyAgent.name}'s commitment store contains the claim!`);\n      }\n    }\n\n    /* POST-CONDITIONS */\n\n    // Com_ag_i ⇒ Com_ag_i ∪ l\n    agent.commitmentStore += `${term}\\n`;\n\n    /* UPDATE DIALOGUE TEXT AND UPDATE COMMITMENT STORE HISTORY */\n\n    this.text += `${agent.name}: But ${translate(term)}.\\n`;\n    this.saveCommitmentStores();\n  }\n\n  // Why(ag_i, l)\n  why(agent, term) {\n    /*  PRE-CONDITIONS */\n\n    // not demo(∏_ag_i ∪ Com_ag_i, l)\n    const prologSession = pl.create();\n    prologSession.consult(agent.knowledgeBase + agent.commitmentStore);\n    prologSession.query(term);\n    prologSession.answer(x => {\n      if (pl.format_answer(x) === 'true ;') {\n        throw new Error(`Pre-conditions of ${agent.name} asking why \"${translate(term)}\" are not satisfied because ` +\n          `the agent can demonstrate the claim through their knowledge base and commitment store!`);\n      }\n    });\n\n    // for some agent ag_j ≠ ag_i, l ∈ Com_ag_j\n    let doesAppear = false;\n\n    for (const someAgent of this.agents) {\n      if (someAgent !== agent && someAgent.commitmentStore.includes(term)) {\n        doesAppear = true;\n      }\n    }\n\n    if (doesAppear === false) {\n      throw new Error(`Pre-conditions of ${agent.name} asking why \"${translate(term)}\" are not satisfied because ` +\n        `no other agent's commitment store contains the claim!`);\n    }\n\n    /* UPDATE DIALOGUE TEXT AND UPDATE COMMITMENT STORE HISTORY */\n\n    this.text += `${agent.name}: Why is it that ${translate(term)}?\\n`;\n    this.saveCommitmentStores();\n  }\n\n  // Concede(ag_i, l)\n  concede(agent, term) {\n    /* PRE-CONDITIONS */\n\n    // for some agent ag_j ≠ ag_i, l ∈ Com_ag_j\n    let doesAppear = false;\n\n    for (const someAgent of this.agents) {\n      if (someAgent !== agent && someAgent.commitmentStore.includes(term)) {\n        doesAppear = true;\n      }\n    }\n\n    if (doesAppear === false) {\n      throw new Error(`Pre-conditions of ${agent.name} conceding to \"${translate(term)}\" are not satisfied because ` +\n        `no other agent's commitment store contains the claim!`);\n    }\n\n    // not(¬l ∈ Com_ag_i)\n    if ((term.includes('\\\\+(') && (agent.commitmentStore.includes(`${term.substring(3, term.length - 2)}.`)))\n      || (!term.includes('\\\\+(') && agent.commitmentStore.includes(`\\\\+(${term.substring(0, term.length - 1)}).`))) {\n      throw new Error(`Pre-conditions of ${agent.name} conceding to \"${translate(term)}\" are not satisfied because ` +\n        `the agent's commitment store contains the negation of the claim!`);\n    }\n\n    /* POST-CONDITIONS */\n\n    // Com_ag_i ⇒ Com_ag_i ∪ l\n    if (!agent.commitmentStore.includes(term)) {\n      agent.commitmentStore += `${term}\\n`;\n    }\n\n    /* UPDATE DIALOGUE TEXT AND UPDATE COMMITMENT STORE HISTORY */\n\n    this.text += `${agent.name}: I accept that ${translate(term)}.\\n`;\n    this.saveCommitmentStores();\n  }\n\n  // Retract(ag_i, l)\n  retract(agent, term) {\n    /* PRE-CONDITIONS */\n\n    // not demo(∏_ag_i ∪ Com_ag_i \\ l, l)\n    const prologSession = pl.create();\n    prologSession.consult(agent.knowledgeBase + agent.commitmentStore.replace(term, ''));\n    prologSession.query(term);\n    prologSession.answer(x => {\n      if (pl.format_answer(x) === 'true ;') {\n        throw new Error(`Pre-conditions of ${agent.name} retracting \"${translate(term)}\" are not satisfied because ` +\n          `the agent can demonstrate the claim through their knowledge base and remaining commitment store!`);\n      }\n    });\n\n    // l ∈ Com_ag_i\n    if (!agent.commitmentStore.includes(term)) {\n      throw new Error(`Pre-conditions of ${agent.name} retracting \"${translate(term)}\" are not satisfied because ` +\n        `the agent's commitment store does not contain the claim!`);\n    }\n\n    /* POST-CONDITIONS */\n\n    // Com_ag_i ⇒ Com_ag_i \\ l\n    agent.commitmentStore = agent.commitmentStore.replace(`${term}\\n`, '');\n\n    /* UPDATE DIALOGUE TEXT AND UPDATE COMMITMENT STORE HISTORY */\n\n    this.text += `${agent.name}: I take back that ${translate(term)}.\\n`;\n    this.saveCommitmentStores();\n  }\n\n  // Since(ag_i, l, ∏)\n  since(agent, otherAgent, term, justifications) {\n    /* PRE-CONDITIONS */\n\n    // l ∈ Com_ag_i\n    if (!agent.commitmentStore.includes(term)) {\n      throw new Error(`Pre-conditions of ${agent.name} offering reasoning for \"${translate(term)}\" are not satisfied because ` +\n        `the agent's commitment store does not contain the claim!`);\n    }\n\n    // demo(∏ ∪ Com_ag_j, l) for some ∏ ⊆ ∏_ag_i\n    for (const justification of justifications) {\n      if (!agent.knowledgeBase.includes(justification)) {\n        throw new Error(`Pre-conditions of ${agent.name} offering reasoning for \"${translate(term)}\" are not satisfied because ` +\n          `the agent's knowledge base does not contain all justifications!`);\n      }\n    }\n\n    let justificationsAsOneString = '';\n\n    for (const justification of justifications) {\n      justificationsAsOneString += `${justification}\\n`;\n    }\n\n    const prologSession = pl.create();\n    prologSession.consult(justificationsAsOneString + otherAgent.commitmentStore);\n    prologSession.query(term);\n    prologSession.answer(x => {\n      if (pl.format_answer(x) !== 'true ;') {\n        throw new Error(`Pre-conditions of ${agent.name} offering reasoning for \"${translate(term)}\" are not satisfied because ` +\n          `${otherAgent.name} cannot demonstrate the claim through the justifications and their commitment store!`);\n      }\n    });\n\n    /* POST-CONDITIONS */\n\n    // Com_ag_i ⇒ Com_ag_i ∪ ∏\n    for (const justification of justifications) {\n      if (!agent.commitmentStore.includes(justification)) {\n        agent.commitmentStore += `${justification}\\n`;\n      }\n    }\n\n    // Com_ag_j ⇒ Com_ag_j ∪ ∏\n    for (const justification of justifications) {\n      if (!otherAgent.commitmentStore.includes(justification)) {\n        otherAgent.commitmentStore += `${justification}\\n`;\n      }\n    }\n\n    /* UPDATE DIALOGUE TEXT AND UPDATE COMMITMENT STORE HISTORY */\n\n    let bodyOfRuleOfClaim = justifications[0].split('-')[1].split(', ')[0].replace(/X/g, term.match(/([A-Za-z0-9])+/g)[1]);\n\n    for (const match of bodyOfRuleOfClaim.match(/([A-Za-z0-9])+/g)) {\n      if (match[0] !== match[0].toLowerCase()) {\n        const prologSession = pl.create();\n        prologSession.consult(justificationsAsOneString + otherAgent.commitmentStore);\n\n        if (bodyOfRuleOfClaim[bodyOfRuleOfClaim.length - 1] !== '.' && bodyOfRuleOfClaim[bodyOfRuleOfClaim.length - 2] !== '.') {\n          bodyOfRuleOfClaim = bodyOfRuleOfClaim + '.'\n        }\n\n        prologSession.query(bodyOfRuleOfClaim);\n        prologSession.answer(x => bodyOfRuleOfClaim = bodyOfRuleOfClaim.replace(match, pl.format_answer(x).split(\" \")[2].replace(/,|\\./g, ''))); // eslint-disable-line no-loop-func\n      }\n    }\n\n    this.text += `${agent.name}: ${translate(term)} since ${format(bodyOfRuleOfClaim.split('),'))}.\\n`;\n    this.saveCommitmentStores();\n  }\n\n  // Question(ag_i, l)\n  question(agent, term) {\n    /* PRE-CONDITIONS */\n\n    // ∀(ag_j) ∈ Ag, l ∉ Com_ag_j\n    for (const anyAgent of this.agents) {\n      if (anyAgent.commitmentStore.includes(term)) {\n        throw new Error(`Pre-conditions of ${agent.name} questioning if \"${translate(term)}\" are not satisfied because ` +\n          `${anyAgent.name}'s commitment store contains the claim!`);\n      }\n    }\n\n    // not demo(∏_ag_i ∪ Com_ag_i, l)\n    const prologSession = pl.create();\n    prologSession.consult(agent.knowledgeBase + agent.commitmentStore);\n    prologSession.query(term);\n    prologSession.answer(x => {\n      if (pl.format_answer(x) === 'true ;') {\n        throw new Error(`Pre-conditions of ${agent.name} questioning if \"${translate(term)}\" are not satisfied because ` +\n          `the agent can demonstrate the claim through their knowledge base and commitment store!`);\n      }\n    });\n\n    /* UPDATE DIALOGUE TEXT AND UPDATE COMMITMENT STORE HISTORY */\n\n    this.text += `${agent.name}: I wonder if ${translate(term)}.\\n`;\n    this.saveCommitmentStores();\n  }\n}\n\nexport default Dialogue;\n","import pl from 'tau-prolog';\n\nimport Dialogue from './Dialogue';\n\nimport { translate } from './utils/helper';\n\nclass PersuasionDialogue extends Dialogue {\n  constructor(agents, proponentIndex) {\n    super(agents);\n\n    this.proponent = agents[proponentIndex];\n  }\n\n  isOver() {\n    for (const agent of this.agents) {\n      if (!agent.commitmentStore.includes(`acceptableRestaurant(${this.proponent.initialPreference}).`)) {\n        return false;\n      }\n    }\n\n    return true;\n  }\n\n  // Claim(ag_i, l) | Claim(O, p(a))\n  claim(agent, term) {\n    const restaurant = term.match(/([A-Za-z0-9])+/g)[1];\n    const property = term.match(/([A-Za-z0-9])+/g)[0];\n\n    /* GENERAL PRE-CONDITIONS */\n\n    // demo(∏_ag_i ∪ Com_ag_i, l)\n    const prologSession = pl.create();\n    prologSession.consult(agent.knowledgeBase + agent.commitmentStore);\n    prologSession.query(term);\n    prologSession.answer(x => {\n      if (pl.format_answer(x) !== 'true ;') {\n        throw new Error(`Pre-conditions of ${agent.name} claiming \"${translate(term)}\" are not satisfied because ` +\n          `the agent cannot demonstrate the claim through their knowledge base and commitment store!`);\n      }\n    });\n\n    // ¬l ∈ Com_ag_j for any ag_j ∈ Ag\n    for (const anyAgent of this.agents) {\n      if (anyAgent.commitmentStore.includes(term)) {\n        throw new Error(`Pre-conditions of ${agent.name} claiming \"${translate(term)}\" are not satisfied because ` +\n          `${anyAgent.name}'s commitment store contains the claim!`);\n      }\n    }\n\n    /*  TYPE-SPECIFIC PRE-CONDITIONS */\n\n    if (agent !== this.proponent) {\n      // preferable(O, a)\n      if (!agent.doesPrefer(restaurant)) {\n        throw new Error(`Pre-conditions of ${agent.name} claiming \"${translate(term)}\" are not satisfied because ` +\n          `the restaurant is not preferable to the agent!`);\n      }\n\n      // p(X) ∈ B, where B is the set of terms in the body of the preference rule of O\n      let termsToCheck = [];\n\n      for (const line of agent.knowledgeBase.split('\\n')) {\n        if (/^acceptableRestaurant\\(X/.test(line)) {\n          for (let m of line.match(/(,|-|, \\()([A-Za-z0-9])+(?=\\()/g)) {\n            m = m.match(/([A-Za-z0-9]+)/g)[0];\n\n            if (!termsToCheck.includes(m)) {\n              termsToCheck.push(m);\n            }\n          }\n        }\n      }\n\n      for (let i = 0; i < termsToCheck.length; i++) {\n        for (const line of agent.knowledgeBase.split('\\n')) {\n          if (new RegExp('^' + termsToCheck[i] + '\\\\(X').test(line)) {\n            for (let m of line.match(/(,|-|, \\()([A-Za-z0-9])+(?=\\()/g)) {\n              m = m.match(/([A-Za-z0-9]+)/g)[0];\n\n              if (!termsToCheck.includes(m)) {\n                termsToCheck.push(m);\n              }\n            }\n          }\n        }\n      }\n\n      if (!termsToCheck.includes(property)) {\n        throw new Error(`Pre-conditions of ${agent.name} claiming \"${translate(term)}\" are not satisfied because ` +\n          `the claim does not correspond to a feature in the body of the agent's preference rule!`);\n      }\n    }\n\n    /* GENERAL POST-CONDITIONS */\n\n    // Com_ag_i ⇒ Com_ag_i ∪ l\n    agent.commitmentStore += `${term}\\n`;\n\n    /* TYPE-SPECIFIC POST-CONDITIONS */\n\n    if (agent !== this.proponent) {\n      // Com_O ⇒ Com_O ∪ acceptableRestaurant(a) iff demo(∏_O ∪ Com_O, acceptableRestaurant(a))\n      prologSession.query(`acceptableRestaurant(${restaurant}).`);\n      prologSession.answer(x => {\n        if (pl.format_answer(x) === 'true ;' && !agent.commitmentStore.includes(`acceptableRestaurant(${restaurant}).`)) {\n          agent.commitmentStore += `acceptableRestaurant(${restaurant}).\\n`;\n        }\n      });\n\n      // Com_O ⇒ Com_O ∪ (p(X) ∈ B), where B is the set of terms in the body of the preference rule of O\n      for (const line of (agent.knowledgeBase + agent.commitmentStore).split('\\n')) {\n        if (new RegExp('^' + property + '\\\\(X(?=\\\\)|,[A-Z]|,' + term.match(/([A-Za-z0-9_])+/g)[2] + ')').test(line)) {\n          if (!agent.commitmentStore.includes(line)) {\n            agent.commitmentStore += `${line}\\n`;\n          }\n        }\n      }\n    }\n\n    /* UPDATE DIALOGUE TEXT AND UPDATE COMMITMENT STORE HISTORY */\n\n    this.text += `${agent.name}: ${translate(term)}.\\n`;\n    this.saveCommitmentStores();\n  }\n\n  // Counterclaim(ag_i, l) | Counterclaim(O, p(a))\n  counterclaim(agent, term) {\n    const property = term.match(/([A-Za-z0-9])+/g)[0];\n\n    /* GENERAL PRE-CONDITIONS */\n\n    // demo(∏_ag_i ∪ Com_ag_i, l)\n    const prologSession = pl.create();\n    prologSession.consult(agent.knowledgeBase + agent.commitmentStore);\n    prologSession.query(term);\n    prologSession.answer(x => {\n      if (pl.format_answer(x) !== 'true ;') {\n        throw new Error(`Pre-conditions of ${agent.name} counterclaiming \"${translate(term)}\" are not satisfied because ` +\n          `the agent cannot demonstrate the claim through their knowledge base and commitment store!`);\n      }\n    });\n\n    // ¬l ∈ Com_ag_j for any ag_j ∈ Ag\n    for (const anyAgent of this.agents) {\n      if (anyAgent.commitmentStore.includes(term)) {\n        throw new Error(`Pre-conditions of ${agent.name} counterclaiming \"${translate(term)}\" are not satisfied because ` +\n          `${anyAgent.name}'s commitment store contains the claim!`);\n      }\n    }\n\n    /*  TYPE-SPECIFIC PRE-CONDITIONS */\n\n    if (agent !== this.proponent) {\n      // ¬preferable(O, a)\n      if (agent.doesPrefer(term.match(/([A-Za-z0-9])+/g)[1])) {\n        throw new Error(`Pre-conditions of ${agent.name} counterclaiming \"${translate(term)}\" are not satisfied because ` +\n          `the restaurant is preferable to the agent!`);\n      }\n\n      // p(X) ∈ B, where B is the set of terms in the body of the preference rule of O\n      let termsToCheck = [];\n\n      for (const line of agent.knowledgeBase.split('\\n')) {\n        if (/^acceptableRestaurant\\(X/.test(line)) {\n          for (let m of line.match(/(,|-|, \\()([A-Za-z0-9])+(?=\\()/g)) {\n            m = m.match(/([A-Za-z0-9]+)/g)[0];\n\n            if (!termsToCheck.includes(m)) {\n              termsToCheck.push(m);\n            }\n          }\n        }\n      }\n\n      for (let i = 0; i < termsToCheck.length; i++) {\n        for (const line of agent.knowledgeBase.split('\\n')) {\n          if (new RegExp('^' + termsToCheck[i] + '\\\\(X').test(line)) {\n            for (let m of line.match(/(,|-|, \\()([A-Za-z0-9])+(?=\\()/g)) {\n              m = m.match(/([A-Za-z0-9]+)/g)[0];\n\n              if (!termsToCheck.includes(m)) {\n                termsToCheck.push(m);\n              }\n            }\n          }\n        }\n      }\n\n      if (!termsToCheck.includes(property)) {\n        throw new Error(`Pre-conditions of ${agent.name} counterclaiming \"${translate(term)}\" are not satisfied because ` +\n          `the claim does not correspond to a feature in the body of the agent's preference rule!`);\n      }\n    }\n\n    /* GENERAL POST-CONDITIONS */\n\n    // Com_ag_i ⇒ Com_ag_i ∪ l\n    agent.commitmentStore += `${term}\\n`;\n\n    /* TYPE-SPECIFIC POST-CONDITIONS */\n\n    if (agent !== this.proponent) {\n      // Com_O ⇒ Com_O ∪ (p(X) ∈ B), where B is the set of terms in the body of the preference rule of O\n      for (const line of (agent.knowledgeBase + agent.commitmentStore).split('\\n')) {\n        if (new RegExp('^' + property + '\\\\(X(?=\\\\)|,[A-Z]|,' + term.match(/([A-Za-z0-9_])+/g)[2] + ')').test(line)) {\n          if (!agent.commitmentStore.includes(line)) {\n            agent.commitmentStore += `${line}\\n`;\n          }\n        }\n      }\n    }\n\n    /* UPDATE DIALOGUE TEXT AND UPDATE COMMITMENT STORE HISTORY */\n\n    this.text += `${agent.name}: But ${translate(term)}.\\n`;\n    this.saveCommitmentStores();\n  }\n\n  // Concede(ag_i, l) | Concede(O, p(a))\n  concede(agent, term) {\n    const property = term.match(/([A-Za-z0-9])+/g)[0];\n\n    /* GENERAL PRE-CONDITIONS */\n\n    // for some agent ag_j ≠ ag_i, l ∈ Com_ag_j\n    let doesAppear = false;\n\n    for (const someAgent of this.agents) {\n      if (someAgent !== agent && someAgent.commitmentStore.includes(term)) {\n        doesAppear = true;\n      }\n    }\n\n    if (doesAppear === false) {\n      throw new Error(`Pre-conditions of ${agent.name} conceding to \"${translate(term)}\" are not satisfied because ` +\n        `no other agent's commitment store contains the claim!`);\n    }\n\n    // not(¬l ∈ Com_ag_i)\n    if ((term.includes('\\\\+(') && (agent.commitmentStore.includes(`${term.substring(3, term.length - 2)}.`)))\n      || (!term.includes('\\\\+(') && agent.commitmentStore.includes(`\\\\+(${term.substring(0, term.length - 1)}).`))) {\n      throw new Error(`Pre-conditions of ${agent.name} conceding to \"${translate(term)}\" are not satisfied because ` +\n        `the agent's commitment store contains the negation of the claim!`);\n    }\n\n    /* TYPE-SPECIFIC PRE-CONDITIONS */\n\n    if (agent !== this.proponent) {\n      // p(X) ∈ B, where B is the set of terms in the body of the preference rule of O\n      let termsToCheck = ['acceptableRestaurant'];\n\n      for (const line of agent.knowledgeBase.split('\\n')) {\n        if (/^acceptableRestaurant\\(X/.test(line)) {\n          for (let m of line.match(/(,|-|, \\()([A-Za-z0-9])+(?=\\()/g)) {\n            m = m.match(/([A-Za-z0-9]+)/g)[0];\n\n            if (!termsToCheck.includes(m)) {\n              termsToCheck.push(m);\n            }\n          }\n        }\n      }\n\n      for (let i = 0; i < termsToCheck.length; i++) {\n        for (const line of agent.knowledgeBase.split('\\n')) {\n          if (new RegExp('^' + termsToCheck[i] + '\\\\(X').test(line)) {\n            for (let m of line.match(/(,|-|, \\()([A-Za-z0-9])+(?=\\()/g)) {\n              m = m.match(/([A-Za-z0-9]+)/g)[0];\n\n              if (!termsToCheck.includes(m)) {\n                termsToCheck.push(m);\n              }\n            }\n          }\n        }\n      }\n\n      if (!termsToCheck.includes(property)) {\n        throw new Error(`Pre-conditions of ${agent.name} conceding to \"${translate(term)}\" are not satisfied because ` +\n          `the claim does not correspond to a feature in the body of the agent's preference rule!`);\n      }\n    }\n\n    /* GENERAL POST-CONDITIONS */\n\n    // Com_ag_i ⇒ Com_ag_i ∪ l\n    if (!agent.commitmentStore.includes(term)) {\n      agent.commitmentStore += `${term}\\n`;\n    }\n\n    /* TYPE-SPECIFIC POST-CONDITIONS */\n\n    if (agent !== this.proponent) {\n      // Com_O ⇒ Com_O ∪ (p(X) ∈ B), where B is the set of terms in the body of the preference rule of O\n      for (const line of (agent.knowledgeBase + agent.commitmentStore).split('\\n')) {\n        if (new RegExp('^' + property + '\\\\(X(?=\\\\)|,[A-Z]|,' + term.match(/([A-Za-z0-9_])+/g)[2] + ')').test(line)) {\n          if (!agent.commitmentStore.includes(line)) {\n            agent.commitmentStore += `${line}\\n`;\n          }\n        }\n      }\n    }\n\n    /* UPDATE DIALOGUE TEXT AND UPDATE COMMITMENT STORE HISTORY */\n\n    this.text += `${agent.name}: I accept that ${translate(term)}.\\n`;\n    this.saveCommitmentStores();\n  }\n\n  // Question(ag_i, l) | Question(O,p(a))\n  question(agent, term) {\n    const property = term.match(/([A-Za-z0-9])+/g)[0];\n\n    /* GENERAL PRE-CONDITIONS */\n\n    // ∀(ag_j) ∈ Ag, l ∉ Com_ag_j\n    for (const anyAgent of this.agents) {\n      if (anyAgent.commitmentStore.includes(term)) {\n        throw new Error(`Pre-conditions of ${agent.name} questioning if \"${translate(term)}\" are not satisfied because ` +\n          `${anyAgent.name}'s commitment store contains the claim!`);\n      }\n    }\n\n    // not demo(∏_ag_i ∪ Com_ag_i, l)\n    const prologSession = pl.create();\n    prologSession.consult(agent.knowledgeBase + agent.commitmentStore);\n    prologSession.query(term);\n    prologSession.answer(x => {\n      if (pl.format_answer(x) === 'true ;') {\n        throw new Error(`Pre-conditions of ${agent.name} questioning if \"${translate(term)}\" are not satisfied because ` +\n          `the agent can demonstrate the claim through their knowledge base and commitment store!`);\n      }\n    });\n\n    /* TYPE-SPECIFIC PRE-CONDITIONS */\n\n    if (agent !== this.proponent) {\n      // p(X) ∈ B, where B is the set of terms in the body of the preference rule of O\n      let termsToCheck = [];\n\n      for (const line of agent.knowledgeBase.split('\\n')) {\n        if (/^acceptableRestaurant\\(X/.test(line)) {\n          for (let m of line.match(/(,|-|, \\()([A-Za-z0-9])+(?=\\()/g)) {\n            m = m.match(/([A-Za-z0-9]+)/g)[0];\n\n            if (!termsToCheck.includes(m)) {\n              termsToCheck.push(m);\n            }\n          }\n        }\n      }\n\n      for (let i = 0; i < termsToCheck.length; i++) {\n        for (const line of agent.knowledgeBase.split('\\n')) {\n          if (new RegExp('^' + termsToCheck[i] + '\\\\(X').test(line)) {\n            for (let m of line.match(/(,|-|, \\()([A-Za-z0-9])+(?=\\()/g)) {\n              m = m.match(/([A-Za-z0-9]+)/g)[0];\n\n              if (!termsToCheck.includes(m)) {\n                termsToCheck.push(m);\n              }\n            }\n          }\n        }\n      }\n\n      if (!termsToCheck.includes(property)) {\n        throw new Error(`Pre-conditions of ${agent.name} questioning if \"${translate(term)}\" are not satisfied because ` +\n          `the claim does not correspond to a feature in the body of the agent's preference rule!`);\n      }\n    }\n\n    /* TYPE-SPECIFIC POST-CONDITIONS */\n\n    if (agent !== this.proponent) {\n      // Com_O ⇒ Com_O ∪ (p(X) ∈ B), where B is the set of terms in the body of the preference rule of O\n      for (const line of (agent.knowledgeBase + agent.commitmentStore).split('\\n')) {\n        if (new RegExp('^' + property + '\\\\(X(?=\\\\)|,[A-Z]|,' + term.match(/([A-Za-z0-9_])+/g)[2] + ')').test(line)) {\n          if (!agent.commitmentStore.includes(line)) {\n            agent.commitmentStore += `${line}\\n`;\n          }\n        }\n      }\n    }\n\n    /* UPDATE DIALOGUE TEXT AND UPDATE COMMITMENT STORE HISTORY */\n\n    this.text += `${agent.name}: I wonder if ${translate(term)}.\\n`;\n    this.saveCommitmentStores();\n  }\n}\n\nexport default PersuasionDialogue;\n","import pl from 'tau-prolog';\n\nimport Dialogue from './Dialogue';\n\nimport { decamelise, format, translate } from './utils/helper';\n\nclass DeliberationDialogue extends Dialogue {\n  constructor(agents) {\n    super(agents);\n\n    this.agreedPreferenceRule = 'acceptableRestaurant(X):-';\n    this.agreedPreferenceRuleHistory = [this.agreedPreferenceRule];\n  }\n\n  saveCommitmentStores() {\n    super.saveCommitmentStores();\n\n    this.agreedPreferenceRuleHistory.push(this.agreedPreferenceRule);\n  }\n\n  isOver() {\n    let collectiveCommitmentStore = '';\n\n    for (const agent of this.agents) {\n      for (const line of agent.commitmentStore.split('\\n')) {\n        if (!/^acceptableRestaurant\\(/.test(line)) {\n          collectiveCommitmentStore += `${line}\\n`;\n        }\n      }\n    }\n\n    collectiveCommitmentStore += this.agreedPreferenceRule;\n\n    let agreedRestaurant = '';\n\n    const prologSession = pl.create();\n    prologSession.consult(collectiveCommitmentStore);\n    prologSession.query('acceptableRestaurant(X).');\n    prologSession.answer(x => {\n      agreedRestaurant = pl.format_answer(x).split(\" \")[2];\n    });\n\n    for (const agent of this.agents) {\n      if (!agent.commitmentStore.includes(`acceptableRestaurant(${agreedRestaurant})`))\n        return false;\n    }\n\n    return true;\n  }\n\n  addTermToAgreedPreferenceRule(term) {\n    const restaurant = term.match(/([A-Za-z0-9_])+/g)[1];\n\n    if (!this.agreedPreferenceRule.includes(term.substring(0, term.length - 1).replace(restaurant, 'X'))) {\n      if (this.agreedPreferenceRule[this.agreedPreferenceRule.length - 1] === '-') {\n        this.agreedPreferenceRule += term.replace(restaurant, 'X');\n      } else {\n        this.agreedPreferenceRule = `${this.agreedPreferenceRule.substring(0, this.agreedPreferenceRule.length - 1)},${term.replace(restaurant, 'X')}`;\n      }\n    }\n  }\n\n  // Claim(ag_i, l) | Claim(O, p(a))\n  claim(agent, term) {\n    const restaurant = term.match(/([A-Za-z0-9])+/g)[1];\n    const property = term.match(/([A-Za-z0-9])+/g)[0];\n\n    /* GENERAL PRE-CONDITIONS */\n\n    // demo(∏_ag_i ∪ Com_ag_i, l)\n    const prologSession = pl.create();\n    prologSession.consult(agent.knowledgeBase + agent.commitmentStore);\n    prologSession.query(term);\n    prologSession.answer(x => {\n      if (pl.format_answer(x) !== 'true ;') {\n        throw new Error(`Pre-conditions of ${agent.name} claiming \"${translate(term)}\" are not satisfied because ` +\n          `the agent cannot demonstrate the claim through their knowledge base and commitment store!`);\n      }\n    });\n\n    // ¬l ∈ Com_ag_j for any ag_j ∈ Ag\n    for (const anyAgent of this.agents) {\n      if (anyAgent.commitmentStore.includes(term)) {\n        throw new Error(`Pre-conditions of ${agent.name} claiming \"${translate(term)}\" are not satisfied because ` +\n          `${anyAgent.name}'s commitment store contains the claim!`);\n      }\n    }\n\n    /*  TYPE-SPECIFIC PRE-CONDITIONS */\n\n    // preferable(O, a)\n    if (!agent.doesPrefer(restaurant)) {\n      throw new Error(`Pre-conditions of ${agent.name} claiming \"${translate(term)}\" are not satisfied because ` +\n        `the restaurant is not preferable to the agent!`);\n    }\n\n    // p(X) ∈ B, where B is the set of terms in the body of the preference rule of O\n    let termsToCheck = [];\n\n    for (const line of agent.knowledgeBase.split('\\n')) {\n      if (/^acceptableRestaurant\\(X/.test(line)) {\n        for (let m of line.match(/(,|-|, \\()([A-Za-z0-9])+(?=\\()/g)) {\n          m = m.match(/([A-Za-z0-9]+)/g)[0];\n\n          if (!termsToCheck.includes(m)) {\n            termsToCheck.push(m);\n          }\n        }\n      }\n    }\n\n    for (let i = 0; i < termsToCheck.length; i++) {\n      for (const line of agent.knowledgeBase.split('\\n')) {\n        if (new RegExp('^' + termsToCheck[i] + '\\\\(X').test(line)) {\n          for (let m of line.match(/(,|-|, \\()([A-Za-z0-9])+(?=\\()/g)) {\n            m = m.match(/([A-Za-z0-9]+)/g)[0];\n\n            if (!termsToCheck.includes(m)) {\n              termsToCheck.push(m);\n            }\n          }\n        }\n      }\n    }\n\n    if (!termsToCheck.includes(property)) {\n      throw new Error(`Pre-conditions of ${agent.name} claiming \"${translate(term)}\" are not satisfied because ` +\n        `the claim does not correspond to a feature in the body of the agent's preference rule!`);\n    }\n\n    /* GENERAL POST-CONDITIONS */\n\n    // Com_ag_i ⇒ Com_ag_i ∪ l\n    agent.commitmentStore += `${term}\\n`;\n\n    /* TYPE-SPECIFIC POST-CONDITIONS */\n\n    // Com_O ⇒ Com_O ∪ acceptableRestaurant(a) iff demo(∏_O ∪ Com_O, acceptableRestaurant(a))\n    prologSession.query(`acceptableRestaurant(${restaurant}).`);\n    prologSession.answer(x => {\n      if (pl.format_answer(x) === 'true ;' && !agent.commitmentStore.includes(`acceptableRestaurant(${restaurant}).`)) {\n        agent.commitmentStore += `acceptableRestaurant(${restaurant}).\\n`;\n      }\n    });\n\n    // Com_O ⇒ Com_O ∪ (p(X) ∈ B), where B is the set of terms in the body of the preference rule of O\n    for (const line of (agent.knowledgeBase + agent.commitmentStore).split('\\n')) {\n      if (new RegExp('^' + property + '\\\\(X(?=\\\\)|,[A-Z]|,' + term.match(/([A-Za-z0-9_])+/g)[2] + ')').test(line)) {\n        if (!agent.commitmentStore.includes(line)) {\n          agent.commitmentStore += `${line}\\n`;\n        }\n      }\n    }\n\n    /* UPDATE DIALOGUE TEXT AND UPDATE COMMITMENT STORE HISTORY */\n\n    this.text += `${agent.name}: ${translate(term)}.\\n`;\n    this.saveCommitmentStores();\n  }\n\n  // Counterclaim(ag_i, l) | Counterclaim(O, p(a))\n  counterclaim(agent, term) {\n    const property = term.match(/([A-Za-z0-9])+/g)[0];\n\n    /* GENERAL PRE-CONDITIONS */\n\n    // demo(∏_ag_i ∪ Com_ag_i, l)\n    const prologSession = pl.create();\n    prologSession.consult(agent.knowledgeBase + agent.commitmentStore);\n    prologSession.query(term);\n    prologSession.answer(x => {\n      if (pl.format_answer(x) !== 'true ;') {\n        throw new Error(`Pre-conditions of ${agent.name} counterclaiming \"${translate(term)}\" are not satisfied because ` +\n          `the agent cannot demonstrate the claim through their knowledge base and commitment store!`);\n      }\n    });\n\n    // ¬l ∈ Com_ag_j for any ag_j ∈ Ag\n    for (const anyAgent of this.agents) {\n      if (anyAgent.commitmentStore.includes(term)) {\n        throw new Error(`Pre-conditions of ${agent.name} counterclaiming \"${translate(term)}\" are not satisfied because ` +\n          `${anyAgent.name}'s commitment store contains the claim!`);\n      }\n    }\n\n    /*  TYPE-SPECIFIC PRE-CONDITIONS */\n\n    // ¬preferable(O, a)\n    if (agent.doesPrefer(term.match(/([A-Za-z0-9])+/g)[1])) {\n      throw new Error(`Pre-conditions of ${agent.name} counterclaiming \"${translate(term)}\" are not satisfied because ` +\n        `the restaurant is preferable to the agent!`);\n    }\n\n    // p(X) ∈ B, where B is the set of terms in the body of the preference rule of O\n    let termsToCheck = [];\n\n    for (const line of agent.knowledgeBase.split('\\n')) {\n      if (/^acceptableRestaurant\\(X/.test(line)) {\n        for (let m of line.match(/(,|-|, \\()([A-Za-z0-9])+(?=\\()/g)) {\n          m = m.match(/([A-Za-z0-9]+)/g)[0];\n\n          if (!termsToCheck.includes(m)) {\n            termsToCheck.push(m);\n          }\n        }\n      }\n    }\n\n    for (let i = 0; i < termsToCheck.length; i++) {\n      for (const line of agent.knowledgeBase.split('\\n')) {\n        if (new RegExp('^' + termsToCheck[i] + '\\\\(X').test(line)) {\n          for (let m of line.match(/(,|-|, \\()([A-Za-z0-9])+(?=\\()/g)) {\n            m = m.match(/([A-Za-z0-9]+)/g)[0];\n\n            if (!termsToCheck.includes(m)) {\n              termsToCheck.push(m);\n            }\n          }\n        }\n      }\n    }\n\n    if (!termsToCheck.includes(property)) {\n      throw new Error(`Pre-conditions of ${agent.name} counterclaiming \"${translate(term)}\" are not satisfied because ` +\n        `the claim does not correspond to a feature in the body of the agent's preference rule!`);\n    }\n\n    /* GENERAL POST-CONDITIONS */\n\n    // Com_ag_i ⇒ Com_ag_i ∪ l\n    agent.commitmentStore += `${term}\\n`;\n\n    /* TYPE-SPECIFIC POST-CONDITIONS */\n\n    // Com_O ⇒ Com_O ∪ (p(X) ∈ B), where B is the set of terms in the body of the preference rule of O\n    for (const line of (agent.knowledgeBase + agent.commitmentStore).split('\\n')) {\n      if (new RegExp('^' + property + '\\\\(X(?=\\\\)|,[A-Z]|,' + term.match(/([A-Za-z0-9_])+/g)[2] + ')').test(line)) {\n        if (!agent.commitmentStore.includes(line)) {\n          agent.commitmentStore += `${line}\\n`;\n        }\n      }\n    }\n\n    /* UPDATE DIALOGUE TEXT AND UPDATE COMMITMENT STORE HISTORY */\n\n    this.text += `${agent.name}: But ${translate(term)}.\\n`;\n    this.saveCommitmentStores();\n  }\n\n  // Concede(ag_i, l) | Concede(O, p(a))\n  concede(agent, term) {\n    const restaurant = term.match(/([A-Za-z0-9_])+/g)[1];\n    const property = term.match(/([A-Za-z0-9])+/g)[0];\n\n    /* GENERAL PRE-CONDITIONS */\n\n    // for some agent ag_j ≠ ag_i, l ∈ Com_ag_j\n    let doesAppear = false;\n\n    for (const someAgent of this.agents) {\n      if (someAgent !== agent && someAgent.commitmentStore.includes(term)) {\n        doesAppear = true;\n      }\n    }\n\n    if (doesAppear === false) {\n      throw new Error(`Pre-conditions of ${agent.name} conceding to \"${translate(term)}\" are not satisfied because ` +\n        `no other agent's commitment store contains the claim!`);\n    }\n\n    // not(¬l ∈ Com_ag_i)\n    if ((term.includes('\\\\+(') && (agent.commitmentStore.includes(`${term.substring(3, term.length - 2)}.`)))\n      || (!term.includes('\\\\+(') && agent.commitmentStore.includes(`\\\\+(${term.substring(0, term.length - 1)}).`))) {\n      throw new Error(`Pre-conditions of ${agent.name} conceding to \"${translate(term)}\" are not satisfied because ` +\n        `the agent's commitment store contains the negation of the claim!`);\n    }\n\n    /* ADD TERM TO BODY OF AGREED PREFERENCE RULE */\n    this.addTermToAgreedPreferenceRule(term);\n\n    /* GENERAL POST-CONDITIONS */\n\n    // Com_ag_i ⇒ Com_ag_i ∪ l\n    if (!agent.commitmentStore.includes(term)) {\n      agent.commitmentStore += `${term}\\n`;\n    }\n\n    /* TYPE-SPECIFIC POST-CONDITIONS */\n\n    // Com_O ⇒ Com_O ∪ p(X) ∈ B, where B is the set of terms in the body of the agreed preference rule\n    for (const line of (agent.knowledgeBase + agent.commitmentStore).split('\\n')) {\n      if (new RegExp('^' + property + '\\\\(X(?=\\\\)|,[A-Z]|,' + term.match(/([A-Za-z0-9_])+/g)[2] + ')').test(line)) {\n        if (!agent.commitmentStore.includes(line)) {\n          agent.commitmentStore += `${line}\\n`;\n        }\n      }\n    }\n\n    /* UPDATE DIALOGUE TEXT AND UPDATE COMMITMENT STORE HISTORY */\n\n    if (property !== 'acceptableRestaurant') {\n      this.text += `${agent.name}: I accept that ${translate(term)}. We want to to a restaurant with ${translate(term.replace(restaurant, '_'))}.\\n`;\n    } else {\n      this.text += `${agent.name}: I accept that ${translate(term)}.\\n`;\n    }\n\n    this.saveCommitmentStores();\n  }\n\n  // Concede-Since(ag_i, g(a), p(a))\n  concedeSince(agent, term, justifications) {\n    let justificationsAsOneString = '';\n\n    for (const justification of justifications) {\n      justificationsAsOneString += `${justification}\\n`;\n    }\n\n    /* TYPE-SPECIFIC PRE-CONDITIONS */\n\n    // demo(∏_ag_i ∪ Com_ag_i ∪ p(a), g(a))\n    const prologSession = pl.create();\n    prologSession.consult(agent.knowledgeBase + agent.commitmentStore + justificationsAsOneString);\n    prologSession.query(term);\n    prologSession.answer(x => {\n      if (pl.format_answer(x) !== 'true ;') {\n        throw new Error(`Pre-conditions of ${agent.name} conceding to and offering reasoning for \"${translate(term)}\" are not satisfied because ` +\n          `the agent cannot demonstrate the claim through their knowledge base, commitment store, and the justifications!`);\n      }\n    });\n\n    // p(a) ∈ Com_ag_j for some ag_j ≠ ag_i\n    let doesAppearGlobally = false;\n\n    for (const someAgent of this.agents) {\n      let doesAppearLocally = true;\n\n      for (const justification of justifications) {\n        if (someAgent !== agent && !someAgent.commitmentStore.includes(justification)) {\n          doesAppearLocally = false;\n        }\n      }\n\n      if (someAgent !== agent && doesAppearLocally === true) {\n        doesAppearGlobally = true;\n      }\n    }\n\n    if (doesAppearGlobally === false) {\n      throw new Error(`Pre-conditions of ${agent.name} conceding to and offering reasoning for \"${translate(term)}\" are not satisfied because ` +\n        `no other agent's commitment store contains the justifications!`);\n    }\n\n    /* ADD JUSTIFICATIONS TO BODY OF AGREED PREFERENCE RULE */\n\n    for (const justification of justifications) {\n      this.addTermToAgreedPreferenceRule(justification);\n    }\n\n    /* TYPE-SPECIFIC POST-CONDITIONS */\n\n    // Com_ag_i ⇒ Com_ag_i ∪ p(a)\n    for (const justification of justifications) {\n      if (!agent.commitmentStore.includes(justification)) {\n        agent.commitmentStore += `${justification}\\n`;\n      }\n    }\n\n    // Com_O ⇒ Com_O ∪ p(X) ∈ B, where B is the set of terms in the body of the agreed preference rule\n    for (const justification of justifications) {\n      for (const line of (agent.knowledgeBase + agent.commitmentStore).split('\\n')) {\n        if (new RegExp('^' + justification.match(/([A-Za-z0-9_])+/g)[0] + '\\\\(X(?=\\\\)|,[A-Z]|,' + justification.match(/([A-Za-z0-9_])+/g)[2] + ')').test(line)) {\n          if (!agent.commitmentStore.includes(line)) {\n            agent.commitmentStore += `${line}\\n`;\n          }\n        }\n      }\n    }\n\n    this.text += `${agent.name}: Since ${format(justifications)}, that makes ${decamelise(term.match(/([A-Za-z0-9])+/g)[1])} an acceptable restaurant. `;\n\n    const uninstatitatedJustifications = [];\n\n    for (let i = 0; i < justifications.length; i++) {\n      uninstatitatedJustifications.push(justifications[i].replace(justifications[i].match(/([A-Za-z0-9])+/g)[1], '_'));\n    }\n\n    this.text += `We want to go to a restaurant with ${format(uninstatitatedJustifications)}.\\n`;\n    this.saveCommitmentStores();\n  }\n}\n\nexport default DeliberationDialogue;\n","const generalKnowledgeBase = `distance(restaurantOne,5,0).\ndistance(restaurantTwo,10,10).\ndistance(restaurantThree,1,0).\nmealTime(restaurantOne,90).\nmealTime(restaurantTwo,60).\nmealTime(restaurantThree,15).\nquality(X,good):-recommended(X,Y),trustworthy(Y).\nquality(X,poor):-recommended(X,students).\nprice(restaurantOne,25).\nprice(restaurantTwo,15).\nprice(restaurantThree,7).\natmosphere(restaurantOne).\natmosphere(restaurantTwo).\nbeverage(restaurantOne).\nbeverage(restaurantTwo).\ncuisine(restaurantOne,cuisineOne).\ncuisine(restaurantTwo,cuisineTwo).\ncuisine(restaurantThree,cuisineThree).\ncuisine(X,mediterranean):-cuisine(X,cuisineOne).\nhealthy(X):-cuisine(X,mediterranean).\nhealthy(X):-vegetables(X).\nvegetables(X):-cuisine(X,cuisineTwo).\ntrustworthy(colleague).\ntrustworthy(husband).\nrecommended(restaurantOne,husband).\nrecommended(restaurantTwo,colleague).\nrecommended(restaurantThree,students).\ntotalTime(X,T):-distance(X,Td,_),mealTime(X,Tm), T is Td+Tm.\ntotalCost(X,C):-distance(X,_,Cd),price(X,Cm), C is Cd+Cm.\nacceptableRestaurant(X):-quality(X,good),healthy(X).\nacceptableRestaurant(X):-cuisine(X,cuisineTwo).\nacceptableRestaurant(X):-quality(X,good), (quality(Y,good),cheaper(Y,X)->false;true).\nacceptableRestaurant(X):-quality(X,good),atmosphere(X),beverage(X),distance(X,_,0), (quality(Y,good),atmosphere(Y),beverage(Y),quicker(Y,X)->false;true).\nacceptableRestaurant(X):-healthy(X),atmosphere(X),beverage(X),distance(X,_,0).\nacceptableRestaurant(X):-quality(X,good),healthy(X),atmosphere(X),beverage(X).\nacceptableRestaurant(X):-quality(X,good),atmosphere(X).\ncheaper(X,Y):-totalCost(X,Cx),totalCost(Y,Cy), Cx < Cy.\nquicker(X,Y):-totalTime(X,Tx),totalTime(Y,Ty), Tx < Ty.`\n\nexport default generalKnowledgeBase;\n","import Agent from './Agent';\nimport PersuasionDialogue from './PersuasionDialogue';\nimport DeliberationDialogue from './DeliberationDialogue';\n\nimport generalKnowledgeBase from './utils/generalKnowledgeBase';\nimport { camelise, decamelise } from './utils/helper';\n\nclass Simulation {\n  constructor(agentNames, restaurantNames, restaurantCuisines, beverage) {\n    this.agentNames = agentNames;\n    this.restaurantNames = restaurantNames;\n    this.restaurantCuisines = restaurantCuisines;\n    this.beverage = beverage;\n    this.generalKnowledgeBase = generalKnowledgeBase\n      .replace(/restaurantOne/g, camelise(restaurantNames[0]))\n      .replace(/restaurantTwo/g, camelise(restaurantNames[1]))\n      .replace(/restaurantThree/g, camelise(restaurantNames[2]))\n      .replace(/cuisineOne/g, camelise(restaurantCuisines[0]))\n      .replace(/cuisineTwo/g, camelise(restaurantCuisines[1]))\n      .replace(/cuisineThree/g, camelise(restaurantCuisines[2]))\n      .replace(/beverage/g, camelise(beverage));\n\n    this.persuasionDialogue = this.simulatePersuasionDialogue();\n    this.deliberationDialogue = this.simulateDeliberationDialogue();\n  }\n\n  simulatePersuasionDialogue() {\n    let knowledgeBaseOne = '', knowledgeBaseTwo = '', knowledgeBaseThree = '';\n\n    for (const [index, line] of this.generalKnowledgeBase.split('\\n').entries()) {\n      if ([15, 23, 24, 6, 18, 19, 29].includes(index)) {\n        knowledgeBaseOne += `${line}\\n`;\n      }\n\n      if ([8, 9, 16, 22, 25, 6, 7, 20, 21, 28, 36, 30].includes(index)) {\n        knowledgeBaseTwo += `${line}\\n`;\n      }\n\n      if ([1, 26, 6, 28, 36, 31].includes(index)) {\n        knowledgeBaseThree += `${line}\\n`;\n      }\n    }\n\n    const persuasionDialogue = new PersuasionDialogue([\n      new Agent(this.agentNames[0], camelise(this.restaurantNames[0]), knowledgeBaseOne),\n      new Agent(this.agentNames[1], camelise(this.restaurantNames[1]), knowledgeBaseTwo),\n      new Agent(this.agentNames[2], camelise(this.restaurantNames[2]), knowledgeBaseThree)\n    ], 1);\n\n    persuasionDialogue.claim(persuasionDialogue.agents[1], `acceptableRestaurant(${camelise(this.restaurantNames[1])}).`);\n    persuasionDialogue.claim(persuasionDialogue.agents[1], `cuisine(${camelise(this.restaurantNames[1])},${camelise(this.restaurantCuisines[1])}).`);\n    persuasionDialogue.counterclaim(persuasionDialogue.agents[2], `distance(${camelise(this.restaurantNames[1])},10,_).`);\n    persuasionDialogue.claim(persuasionDialogue.agents[1], `quality(${camelise(this.restaurantNames[1])},good).`);\n    persuasionDialogue.claim(persuasionDialogue.agents[2], `recommended(${camelise(this.restaurantNames[2])},students).`);\n    persuasionDialogue.question(persuasionDialogue.agents[2], `quality(${camelise(this.restaurantNames[2])},good).`);\n    persuasionDialogue.concede(persuasionDialogue.agents[1], `recommended(${camelise(this.restaurantNames[2])},students).`);\n    persuasionDialogue.counterclaim(persuasionDialogue.agents[1], `quality(${camelise(this.restaurantNames[2])},poor).`);\n    persuasionDialogue.claim(persuasionDialogue.agents[0], `quality(${camelise(this.restaurantNames[0])},good).`);\n    persuasionDialogue.claim(persuasionDialogue.agents[0], `healthy(${camelise(this.restaurantNames[0])}).`);\n    persuasionDialogue.claim(persuasionDialogue.agents[1], `healthy(${camelise(this.restaurantNames[1])}).`);\n    persuasionDialogue.claim(persuasionDialogue.agents[1], `price(${camelise(this.restaurantNames[1])},15).`);\n    persuasionDialogue.counterclaim(persuasionDialogue.agents[1], `price(${camelise(this.restaurantNames[0])},25).`);\n    persuasionDialogue.counterclaim(persuasionDialogue.agents[2], `distance(${camelise(this.restaurantNames[1])},_,10).`);\n    persuasionDialogue.concede(persuasionDialogue.agents[1], `distance(${camelise(this.restaurantNames[1])},_,10).`);\n    persuasionDialogue.counterclaim(persuasionDialogue.agents[1], `\\\\+(cheaper(${camelise(this.restaurantNames[0])},${camelise(this.restaurantNames[1])})).`);\n    persuasionDialogue.concede(persuasionDialogue.agents[2], `acceptableRestaurant(${camelise(this.restaurantNames[1])}).`);\n    persuasionDialogue.concede(persuasionDialogue.agents[0], `acceptableRestaurant(${camelise(this.restaurantNames[1])}).`);\n\n    persuasionDialogue.text = persuasionDialogue.text\n      .replace(new RegExp(decamelise(camelise(this.restaurantNames[0])), 'gi'), this.restaurantNames[0])\n      .replace(new RegExp(decamelise(camelise(this.restaurantNames[1])), 'gi'), this.restaurantNames[1])\n      .replace(new RegExp(decamelise(camelise(this.restaurantNames[2])), 'gi'), this.restaurantNames[2])\n      .replace(new RegExp(this.restaurantCuisines[0], 'gi'), this.restaurantCuisines[0])\n      .replace(new RegExp(this.restaurantCuisines[1], 'gi'), this.restaurantCuisines[1])\n      .replace(new RegExp(this.restaurantCuisines[2], 'gi'), this.restaurantCuisines[2]);\n\n    if (persuasionDialogue.isOver()) {\n      return persuasionDialogue;\n    } else {\n      throw new Error('Persuasion dialogue has not reached an end state!');\n    }\n  }\n\n  simulateDeliberationDialogue() {\n    let knowledgeBaseOne = '', knowledgeBaseTwo = '', knowledgeBaseThree = '';\n\n    for (const [index, line] of this.generalKnowledgeBase.split('\\n').entries()) {\n      if ([0, 11, 13, 15, 23, 24, 6, 18, 19, 29, 33].includes(index)) {\n        knowledgeBaseOne += `${line}\\n`;\n      }\n\n      if ([12, 13, 14, 15, 16, 22, 25, 6, 18, 19, 20, 21, 30, 34].includes(index)) {\n        knowledgeBaseTwo += `${line}\\n`;\n      }\n\n      if ([1, 2, 8, 10, 23, 26, 6, 28, 36, 31, 35].includes(index)) {\n        knowledgeBaseThree += `${line}\\n`;\n      }\n    }\n\n    const deliberationDialogue = new DeliberationDialogue([\n      new Agent(this.agentNames[0], camelise(this.restaurantNames[0]), knowledgeBaseOne),\n      new Agent(this.agentNames[1], camelise(this.restaurantNames[1]), knowledgeBaseTwo),\n      new Agent(this.agentNames[2], camelise(this.restaurantNames[2]), knowledgeBaseThree)\n    ]);\n\n    deliberationDialogue.claim(deliberationDialogue.agents[1], `cuisine(${camelise(this.restaurantNames[1])},${camelise(this.restaurantCuisines[1])}).`);\n    deliberationDialogue.counterclaim(deliberationDialogue.agents[2], `distance(${camelise(this.restaurantNames[1])},10,_).`);\n    deliberationDialogue.claim(deliberationDialogue.agents[2], `distance(${camelise(this.restaurantNames[2])},1,0).`);\n    deliberationDialogue.claim(deliberationDialogue.agents[0], `distance(${camelise(this.restaurantNames[0])},_,0).`);\n    deliberationDialogue.claim(deliberationDialogue.agents[0], `quality(${camelise(this.restaurantNames[0])},good).`);\n    deliberationDialogue.counterclaim(deliberationDialogue.agents[2], `price(${camelise(this.restaurantNames[0])},25).`);\n    deliberationDialogue.claim(deliberationDialogue.agents[2], `price(${camelise(this.restaurantNames[2])},7).`);\n    deliberationDialogue.counterclaim(deliberationDialogue.agents[1], `\\\\+(${camelise(this.beverage)}(${camelise(this.restaurantNames[2])})).`);\n    deliberationDialogue.claim(deliberationDialogue.agents[1], `${camelise(this.beverage)}(${camelise(this.restaurantNames[1])}).`);\n    deliberationDialogue.counterclaim(deliberationDialogue.agents[0], `\\\\+(atmosphere(${camelise(this.restaurantNames[2])})).`);\n    deliberationDialogue.claim(deliberationDialogue.agents[0], `atmosphere(${camelise(this.restaurantNames[0])}).`);\n    deliberationDialogue.claim(deliberationDialogue.agents[1], `atmosphere(${camelise(this.restaurantNames[1])}).`);\n    deliberationDialogue.claim(deliberationDialogue.agents[1], `quality(${camelise(this.restaurantNames[1])},good).`);\n    deliberationDialogue.counterclaim(deliberationDialogue.agents[2], `distance(${camelise(this.restaurantNames[1])},_,10).`);\n    deliberationDialogue.claim(deliberationDialogue.agents[1], `healthy(${camelise(this.restaurantNames[1])}).`);\n    deliberationDialogue.claim(deliberationDialogue.agents[0], `healthy(${camelise(this.restaurantNames[0])}).`);\n    deliberationDialogue.concedeSince(deliberationDialogue.agents[1], `acceptableRestaurant(${camelise(this.restaurantNames[0])}).`, [`quality(${camelise(this.restaurantNames[0])},good).`, `atmosphere(${camelise(this.restaurantNames[0])}).`]);\n    deliberationDialogue.concedeSince(deliberationDialogue.agents[2], `acceptableRestaurant(${camelise(this.restaurantNames[1])}).`, [`quality(${camelise(this.restaurantNames[1])},good).`, `atmosphere(${camelise(this.restaurantNames[1])}).`]);\n    deliberationDialogue.concede(deliberationDialogue.agents[0], `${camelise(this.beverage)}(${camelise(this.restaurantNames[1])}).`);\n    deliberationDialogue.claim(deliberationDialogue.agents[0], `${camelise(this.beverage)}(${camelise(this.restaurantNames[0])}).`);\n    deliberationDialogue.concedeSince(deliberationDialogue.agents[1], `acceptableRestaurant(${camelise(this.restaurantNames[0])}).`, [`distance(${camelise(this.restaurantNames[0])},_,0).`]);\n    deliberationDialogue.concede(deliberationDialogue.agents[2], `acceptableRestaurant(${camelise(this.restaurantNames[0])}).`);\n    deliberationDialogue.concede(deliberationDialogue.agents[1], `acceptableRestaurant(${camelise(this.restaurantNames[0])}).`);\n\n    deliberationDialogue.text = deliberationDialogue.text\n      .replace(new RegExp(decamelise(camelise(this.restaurantNames[0])), 'gi'), this.restaurantNames[0])\n      .replace(new RegExp(decamelise(camelise(this.restaurantNames[1])), 'gi'), this.restaurantNames[1])\n      .replace(new RegExp(decamelise(camelise(this.restaurantNames[2])), 'gi'), this.restaurantNames[2])\n      .replace(new RegExp(this.restaurantCuisines[0], 'gi'), this.restaurantCuisines[0])\n      .replace(new RegExp(this.restaurantCuisines[1], 'gi'), this.restaurantCuisines[1])\n      .replace(new RegExp(this.restaurantCuisines[2], 'gi'), this.restaurantCuisines[2]);\n\n    if (deliberationDialogue.isOver()) {\n      return deliberationDialogue;\n    } else {\n      throw new Error('Deliberation dialogue has not reached an end state!');\n    }\n  }\n}\n\nexport default Simulation;\n","import React, { Component } from \"react\";\nimport { Button, FormGroup, InlineNotification, RadioButton, RadioButtonGroup, TextInput } from 'carbon-components-react';\n\nimport DialogueAccordion from './DialogueAccordion';\nimport Simulation from './protocols/Simulation';\n\nimport './Generate.css';\n\nclass Generate extends Component {\n  constructor() {\n    super();\n\n    this.state = {\n      firstAgentsName: '',\n      secondAgentsName: '',\n      thirdAgentsName: '',\n      isFirstAgentsNameInvalid: false,\n      isSecondAgentsNameInvalid: false,\n      isThirdAgentsNameInvalid: false,\n      firstRestaurantsName: '',\n      secondRestaurantsName: '',\n      thirdRestaurantsName: '',\n      isFirstRestaurantsNameInvalid: false,\n      isSecondRestaurantsNameInvalid: false,\n      isThirdRestaurantsNameInvalid: false,\n      firstRestaurantsCuisine: 'Italian',\n      secondRestaurantsCuisine: 'Thai',\n      thirdRestaurantsCuisine: 'American',\n      beverage: 'Wine',\n      isErrorNotificationVisible: false,\n      simulation: null\n    };\n\n    this.onChange = this.onChange.bind(this);\n    this.checkInputValues = this.checkInputValues.bind(this);\n    this.generateDialogues = this.generateDialogues.bind(this);\n    this.resetState = this.resetState.bind(this);\n  }\n\n  onChange(event) {\n    this.setState({\n      [event.target.id]: event.target.value\n    });\n  }\n\n  checkInputValues() {\n    this.state.firstAgentsName === '' ? this.setState({ isFirstAgentsNameInvalid: true }) : this.setState({ isFirstAgentsNameInvalid: false });\n    this.state.secondAgentsName === '' ? this.setState({ isSecondAgentsNameInvalid: true }) : this.setState({ isSecondAgentsNameInvalid: false });\n    this.state.thirdAgentsName === '' ? this.setState({ isThirdAgentsNameInvalid: true }) : this.setState({ isThirdAgentsNameInvalid: false });\n    this.state.firstRestaurantsName === '' ? this.setState({ isFirstRestaurantsNameInvalid: true }) : this.setState({ isFirstRestaurantsNameInvalid: false });\n    this.state.secondRestaurantsName === '' ? this.setState({ isSecondRestaurantsNameInvalid: true }) : this.setState({ isSecondRestaurantsNameInvalid: false });\n    this.state.thirdRestaurantsName === '' ? this.setState({ isThirdRestaurantsNameInvalid: true }) : this.setState({ isThirdRestaurantsNameInvalid: false });\n\n    if (this.state.firstAgentsName === '' || this.state.secondAgentsName === '' || this.state.thirdAgentsName === ''\n      || this.state.firstRestaurantsName === '' || this.state.secondRestaurantsName === '' || this.state.thirdRestaurantsName === '') {\n\n      this.setState({\n        isErrorNotificationVisible: true\n      });\n\n      return false;\n    }\n\n    return true;\n  }\n\n  generateDialogues() {\n    if (this.checkInputValues()) {\n      this.setState({\n        simulation: new Simulation(\n          [this.state.firstAgentsName, this.state.secondAgentsName, this.state.thirdAgentsName],\n          [this.state.firstRestaurantsName, this.state.secondRestaurantsName, this.state.thirdRestaurantsName],\n          [this.state.firstRestaurantsCuisine, this.state.secondRestaurantsCuisine, this.state.thirdRestaurantsCuisine],\n          this.state.beverage\n        )\n      });\n    }\n  }\n\n  resetState() {\n    this.setState({\n      firstAgentsName: '',\n      secondAgentsName: '',\n      thirdAgentsName: '',\n      isFirstAgentsNameInvalid: false,\n      isSecondAgentsNameInvalid: false,\n      isThirdAgentsNameInvalid: false,\n      firstRestaurantsName: '',\n      secondRestaurantsName: '',\n      thirdRestaurantsName: '',\n      isFirstRestaurantsNameInvalid: false,\n      isSecondRestaurantsNameInvalid: false,\n      isThirdRestaurantsNameInvalid: false,\n      firstRestaurantsCuisine: 'Italian',\n      secondRestaurantsCuisine: 'Thai',\n      thirdRestaurantsCuisine: 'American',\n      beverage: 'Wine',\n      isErrorNotificationVisible: false,\n      simulation: null\n    });\n  }\n\n  render() {\n    return (\n      <div>\n        {!this.state.simulation && (\n          <div>\n            <div className=\"bx--row\">\n              <div className=\"bx--offset-md-1 bx--col-md-10 bx--offset-xl-2 bx--col-xl-8\">\n                <div className=\"heading\"></div>\n                <h2 className=\"heading\">Customise</h2>\n              </div>\n            </div>\n            <div className=\"bx--row\">\n              <div className=\"bx--offset-md-1 bx--col-md-10 bx--offset-xl-2 bx--col-xl-8\">\n                <p>\n                  Use the form below to generate your own custom persuasion and deliberation dialogues.\n                  None of the information you provide will be stored for future use by the system.\n                </p>\n              </div>\n            </div>\n            <div className=\"bx--row\">\n              <div className=\"bx--offset-md-1 bx--col-md-10 bx--offset-xl-2 bx--col-xl-8\">\n                <div className=\"heading\"></div>\n                <h2 className=\"heading\">Agents' names</h2>\n              </div>\n            </div>\n            <div className=\"bx--row\">\n              <div className=\"bx--offset-md-1 bx--col-md-10 bx--offset-xl-2 bx--col-xl-8\">\n                <p className=\"description\">\n                  Choose names for the agents that will be participating in the dialogues.\n                </p>\n              </div>\n            </div>\n            <div className=\"bx--row\">\n              <div className=\"bx--offset-md-1 bx--col-md-10 bx--offset-xl-2 bx--col-xl-8\">\n                <div className=\"text-input\">\n                  <TextInput\n                    id=\"firstAgentsName\"\n                    labelText=\"First agent's name\"\n                    invalid={this.state.isFirstAgentsNameInvalid}\n                    invalidText=\"Please provide a valid name\"\n                    onChange={this.onChange}\n                  />\n                </div>\n              </div>\n            </div>\n            <div className=\"bx--row\">\n              <div className=\"bx--offset-md-1 bx--col-md-10 bx--offset-xl-2 bx--col-xl-8\">\n                <div className=\"text-input\">\n                  <TextInput\n                    id=\"secondAgentsName\"\n                    labelText=\"Second agent's name\"\n                    invalid={this.state.isSecondAgentsNameInvalid}\n                    invalidText=\"Please provide a valid name\"\n                    onChange={this.onChange}\n                  />\n                </div>\n              </div>\n            </div>\n            <div className=\"bx--row\">\n              <div className=\"bx--offset-md-1 bx--col-md-10 bx--offset-xl-2 bx--col-xl-8\">\n                <div className=\"text-input\">\n                  <TextInput\n                    id=\"thirdAgentsName\"\n                    labelText=\"Third agent's name\"\n                    invalid={this.state.isThirdAgentsNameInvalid}\n                    invalidText=\"Please provide a valid name\"\n                    onChange={this.onChange}\n                  />\n                </div>\n              </div>\n            </div>\n            <div className=\"bx--row\">\n              <div className=\"bx--offset-md-1 bx--col-md-10 bx--offset-xl-2 bx--col-xl-8\">\n                <div className=\"heading\"></div>\n                <h2 className=\"heading\">Restaurants' names</h2>\n              </div>\n            </div>\n            <div className=\"bx--row\">\n              <div className=\"bx--offset-md-1 bx--col-md-10 bx--offset-xl-2 bx--col-xl-8\">\n                <p className=\"description\">\n                  Choose names for the restaurants around which the dialogues will revolve.\n                </p>\n              </div>\n            </div>\n            <div className=\"bx--row\">\n              <div className=\"bx--offset-md-1 bx--col-md-10 bx--offset-xl-2 bx--col-xl-8\">\n                <div className=\"text-input\">\n                  <TextInput\n                    id=\"firstRestaurantsName\"\n                    labelText=\"First restaurant's name\"\n                    invalid={this.state.isFirstRestaurantsNameInvalid}\n                    invalidText=\"Please provide a valid name\"\n                    onChange={this.onChange}\n                  />\n                </div>\n              </div>\n            </div>\n            <div className=\"bx--row\">\n              <div className=\"bx--offset-md-1 bx--col-md-10 bx--offset-xl-2 bx--col-xl-8\">\n                <div className=\"text-input\">\n                  <TextInput\n                    id=\"secondRestaurantsName\"\n                    labelText=\"Second restaurant's name\"\n                    invalid={this.state.isSecondRestaurantsNameInvalid}\n                    invalidText=\"Please provide a valid name\"\n                    onChange={this.onChange}\n                  />\n                </div>\n              </div>\n            </div>\n            <div className=\"bx--row\">\n              <div className=\"bx--offset-md-1 bx--col-md-10 bx--offset-xl-2 bx--col-xl-8\">\n                <div className=\"text-input\">\n                  <TextInput\n                    id=\"thirdRestaurantsName\"\n                    labelText=\"Third restaurant's name\"\n                    invalid={this.state.isThirdRestaurantsNameInvalid}\n                    invalidText=\"Please provide a valid name\"\n                    onChange={this.onChange}\n                  />\n                </div>\n              </div>\n            </div>\n            <div className=\"bx--row\">\n              <div className=\"bx--offset-md-1 bx--col-md-10 bx--offset-xl-2 bx--col-xl-8\">\n                <div className=\"heading\"></div>\n                <h2 className=\"heading\">Restaurants' cuisines</h2>\n              </div>\n            </div>\n            <div className=\"bx--row\">\n              <div className=\"bx--offset-md-1 bx--col-md-10 bx--offset-xl-2 bx--col-xl-8\">\n                <p className=\"description\">\n                  Pick the cuisines for each restaurant.\n                </p>\n              </div>\n            </div>\n            <div className=\"bx--row\">\n              <div className=\"bx--offset-md-1 bx--col-md-10 bx--offset-xl-2 bx--col-xl-8\">\n                <FormGroup legendText=\"First restaurant's cuisine\">\n                  <RadioButtonGroup\n                    name=\"first-restaurants-cuisine-radio-button-group\"\n                    valueSelected=\"Italian\"\n                    onChange={(event) => this.setState({ firstRestaurantsCuisine: event })}\n                  >\n                    <RadioButton value=\"Italian\" labelText=\"Italian\" />\n                    <RadioButton value=\"Greek\" labelText=\"Greek\" />\n                    <RadioButton value=\"Spanish\" labelText=\"Spanish\" />\n                  </RadioButtonGroup>\n                </FormGroup>\n              </div>\n            </div>\n            <div className=\"bx--row\">\n              <div className=\"bx--offset-md-1 bx--col-md-10 bx--offset-xl-2 bx--col-xl-8\">\n                <FormGroup legendText=\"Second restaurant's cuisine\">\n                  <RadioButtonGroup\n                    name=\"second-restaurants-cuisine-radio-button-group\"\n                    valueSelected=\"Thai\"\n                    onChange={(event) => this.setState({ secondRestaurantsCuisine: event })}\n                  >\n                    <RadioButton value=\"Thai\" labelText=\"Thai\" />\n                    <RadioButton value=\"Indian\" labelText=\"Indian\" />\n                    <RadioButton value=\"Japanese\" labelText=\"Japanese\" />\n                  </RadioButtonGroup>\n                </FormGroup>\n              </div>\n            </div>\n            <div className=\"bx--row\">\n              <div className=\"bx--offset-md-1 bx--col-md-10 bx--offset-xl-2 bx--col-xl-8\">\n                <FormGroup legendText=\"Third restaurant's cuisine\">\n                  <RadioButtonGroup\n                    name=\"third-restaurants-cuisine-radio-button-group\"\n                    valueSelected=\"American\"\n                    onChange={(event) => this.setState({ thirdRestaurantsCuisine: event })}\n                  >\n                    <RadioButton value=\"American\" labelText=\"American\" />\n                    <RadioButton value=\"Bulgarian\" labelText=\"Bulgarian\" />\n                    <RadioButton value=\"Turkish\" labelText=\"Turkish\" />\n                  </RadioButtonGroup>\n                </FormGroup>\n              </div>\n            </div>\n            <div className=\"bx--row\">\n              <div className=\"bx--offset-md-1 bx--col-md-10 bx--offset-xl-2 bx--col-xl-8\">\n                <div className=\"heading\"></div>\n                <h2 className=\"heading\">Beverage</h2>\n              </div>\n            </div>\n            <div className=\"bx--row\">\n              <div className=\"bx--offset-md-1 bx--col-md-10 bx--offset-xl-2 bx--col-xl-8\">\n                <p className=\"description\">\n                  Pick the beverage that will be preferred by the agents.\n                </p>\n              </div>\n            </div>\n            <div className=\"bx--row\">\n              <div className=\"bx--offset-md-1 bx--col-md-10 bx--offset-xl-2 bx--col-xl-8\">\n                <FormGroup legendText=\"Beverage\">\n                  <RadioButtonGroup\n                    name=\"beverage-radio-button-group\"\n                    valueSelected=\"Wine\"\n                    onChange={(event) => this.setState({ beverage: event })}\n                  >\n                    <RadioButton value=\"Wine\" labelText=\"Wine\" />\n                    <RadioButton value=\"Champagne\" labelText=\"Champagne\" />\n                    <RadioButton value=\"Cocktails\" labelText=\"Cocktails\" />\n                  </RadioButtonGroup>\n                </FormGroup>\n              </div>\n            </div>\n            <div className=\"bx--row\">\n              <div className=\"bx--offset-md-1 bx--col-md-10 bx--offset-xl-2 bx--col-xl-8\">\n                <div className=\"heading\"></div>\n                <h2 className=\"heading\">Generate</h2>\n              </div>\n            </div>\n            <div className=\"bx--row\">\n              <div className=\"bx--offset-md-1 bx--col-md-10 bx--offset-xl-2 bx--col-xl-8\">\n                <p className=\"description\">\n                  Click the button below to generate your custom dialogues.\n                  {this.state.isErrorNotificationVisible && (\n                    <InlineNotification\n                      hideCloseButton={true}\n                      kind=\"error\"\n                      title=\"Invalid names\"\n                      subtitle=\"Some of the names for the agents or restaurants are invalid.\"\n                    />\n                  )}\n                </p>\n              </div>\n            </div>\n            <div className=\"bx--row\">\n              <div className=\"bx--offset-md-1 bx--col-md-10 bx--offset-xl-2 bx--col-xl-8\">\n                <Button onClick={this.generateDialogues}>\n                  Generate\n                </Button>\n              </div>\n            </div>\n          </div>\n        )}\n        {this.state.simulation && (\n          <div>\n            <div className=\"bx--row\">\n              <div className=\"bx--offset-md-1 bx--col-md-10 bx--offset-xl-2 bx--col-xl-8\">\n                <div className=\"heading\"></div>\n                <h2 className=\"heading\">Remarks</h2>\n              </div>\n            </div>\n            <div className=\"bx--row\">\n              <div className=\"bx--offset-md-1 bx--col-md-10 bx--offset-xl-2 bx--col-xl-8\">\n                <p>\n                  Check out your custom dialogues below.\n                  You can observe the differences between the two types speech act by speech act,\n                  but you can also reveal their full lengths at any point.\n                </p>\n                <p className=\"not-first\">\n                  While inspecting the persuasion dialogue, note how {this.state.simulation.agentNames[1]}\n                  &nbsp;asserts {this.state.simulation.restaurantNames[1]} as an acceptable choice at the very start.\n                  The agent then tries to prove that it is acceptable for the others\n                  as they make objections indicating points on which they wish to be convinced.\n                </p>\n                <p className=\"not-first\">\n                  On the other hand, {this.state.simulation.agentNames[1]} is not committed\n                  to their preferred option in the deliberation dialogue.\n                  The agents rather collectively introduce properties that are later either rejected or accepted\n                  as part of an agreed rule of what constitutes an acceptable restaurant.\n                </p>\n              </div>\n            </div>\n            <div className=\"bx--row\">\n              <div className=\"bx--offset-md-1 bx--col-md-5 bx--offset-xl-2 bx--col-xl-4\">\n                <DialogueAccordion dialogue={this.state.simulation.persuasionDialogue} dialogueType=\"Persuasion\" />\n              </div>\n              <div className=\"bx--col-md-5 bx--col-xl-4\">\n                <DialogueAccordion dialogue={this.state.simulation.deliberationDialogue} dialogueType=\"Deliberation\" />\n              </div>\n            </div>\n            <div className=\"bx--row\">\n              <div className=\"bx--offset-md-1 bx--col-md-10 bx--offset-xl-2 bx--col-xl-8\">\n                <div className=\"heading\"></div>\n                <h2 className=\"heading\">Reset</h2>\n              </div>\n            </div>\n            <div className=\"bx--row\">\n              <div className=\"bx--offset-md-1 bx--col-md-10 bx--offset-xl-2 bx--col-xl-8\">\n                <p className=\"description\">\n                  Click the button below to reset the dialogues and start over.\n                </p>\n              </div>\n            </div>\n            <div className=\"bx--row\">\n              <div className=\"bx--offset-md-1 bx--col-md-10 bx--offset-xl-2 bx--col-xl-8\">\n                <Button kind=\"danger\" onClick={this.resetState}>\n                  Reset\n                </Button>\n              </div>\n            </div>\n          </div>\n        )}\n      </div>\n    );\n  }\n}\n\nexport default Generate;\n","import React, { Component } from \"react\";\nimport { Accordion, AccordionItem, ListItem, Tooltip, UnorderedList } from 'carbon-components-react';\n\nimport './DemoDialogue.css';\n\nclass DemoDialogue extends Component {\n  render() {\n    return (\n      <Accordion>\n        <AccordionItem\n          title={<div><strong>Jane</strong>: I wonder if Thai Palace has property healthy.\n            <Tooltip triggerText=\"&nbsp;\">\n              <p>Jane poses a question seeking information about Thai Palace and indicating that \"quality\" is a criterion she finds desirable.</p>\n            </Tooltip>\n          </div>}\n        >\n          <UnorderedList>\n            <ListItem className=\"list-item\">\n              Jane's commitment store:\n              <UnorderedList nested className=\"unordered-nested-list\">\n                <ListItem className=\"nested-list-item\">\n                  healthy(X):-cuisine(X,mediterranean).\n                  <Tooltip triggerText=\"&nbsp;\">\n                    <p>Jane considers a healthy restaurant to be one that offers mediterranean cuisine.</p>\n                  </Tooltip>\n                </ListItem>\n              </UnorderedList>\n            </ListItem>\n            <ListItem className=\"list-item\">\n              Harry's commitment store:\n              <UnorderedList nested className=\"unordered-nested-list\">\n              </UnorderedList>\n            </ListItem>\n          </UnorderedList>\n        </AccordionItem>\n        <AccordionItem\n          title={<div><strong>Harry</strong>: Thai Palace has property healthy.\n            <Tooltip triggerText=\"&nbsp;\">\n              <p>Harry asserts the claim as true in order to persuade Jane towards Thai Palace.</p>\n            </Tooltip>\n          </div>}\n        >\n          <UnorderedList>\n            <ListItem className=\"list-item\">\n              Jane's commitment store:\n              <UnorderedList nested className=\"unordered-nested-list\">\n                <ListItem className=\"nested-list-item\">\n                  healthy(X):-cuisine(X,mediterranean).\n                </ListItem>\n              </UnorderedList>\n            </ListItem>\n            <ListItem className=\"list-item\">\n              Harry's commitment store:\n              <UnorderedList nested className=\"unordered-nested-list\">\n                <ListItem className=\"nested-list-item\">\n                  healthy(thaiPalace).\n                </ListItem>\n              </UnorderedList>\n            </ListItem>\n          </UnorderedList>\n        </AccordionItem>\n        <AccordionItem\n          title={<div><strong>Jane</strong>: Why is it that Thai Palace has property healthy?\n            <Tooltip triggerText=\"&nbsp;\">\n              <p>Jane seeks reasoning for Harry's claim as she cannot derive it on her own.</p>\n            </Tooltip>\n          </div>}\n        >\n          <UnorderedList>\n            <ListItem className=\"list-item\">\n              Jane's commitment store:\n              <UnorderedList nested className=\"unordered-nested-list\">\n                <ListItem className=\"nested-list-item\">\n                  healthy(X):-cuisine(X,mediterranean).\n                </ListItem>\n              </UnorderedList>\n            </ListItem>\n            <ListItem className=\"list-item\">\n              Harry's commitment store:\n              <UnorderedList nested className=\"unordered-nested-list\">\n                <ListItem className=\"nested-list-item\">\n                  healthy(thaiPalace).\n                </ListItem>\n              </UnorderedList>\n            </ListItem>\n          </UnorderedList>\n        </AccordionItem>\n        <AccordionItem\n          title={<div><strong>Harry</strong>: Thai Palace has property healthy since Thai Palace has property vegetables.\n            <Tooltip triggerText=\"&nbsp;\">\n              <p>Harry offers reasoning for his claim and contributes a new rule for what constitutes a healthy restaurant.</p>\n            </Tooltip>\n          </div>}\n        >\n          <UnorderedList>\n            <ListItem className=\"list-item\">\n              Jane's commitment store:\n              <UnorderedList nested className=\"unordered-nested-list\">\n                <ListItem className=\"nested-list-item\">\n                  healthy(X):-cuisine(X,mediterranean).\n                </ListItem>\n                <ListItem className=\"nested-list-item\">\n                  healthy(X):-vegetables(X).\n                </ListItem>\n                <ListItem className=\"nested-list-item\">\n                  vegetables(X):-cuisine(X,thai).\n                </ListItem>\n                <ListItem className=\"nested-list-item\">\n                  cuisine(thaiPalace,thai).\n                </ListItem>\n              </UnorderedList>\n            </ListItem>\n            <ListItem className=\"list-item\">\n              Harry's commitment store:\n              <UnorderedList nested className=\"unordered-nested-list\">\n                <ListItem className=\"nested-list-item\">\n                  healthy(thaiPalace).\n                </ListItem>\n                <ListItem className=\"nested-list-item\">\n                  healthy(X):-vegetables(X).\n                </ListItem>\n                <ListItem className=\"nested-list-item\">\n                  vegetables(X):-cuisine(X,thai).\n                </ListItem>\n                <ListItem className=\"nested-list-item\">\n                  cuisine(thaiPalace,thai).\n                </ListItem>\n              </UnorderedList>\n            </ListItem>\n          </UnorderedList>\n        </AccordionItem>\n        <AccordionItem\n          title={<div><strong>Jane</strong>: I accept that Thai Palace has property healthy.\n            <Tooltip triggerText=\"&nbsp;\">\n              <p>Jane concedes to the claim as she now has the knowledge to derive it.</p>\n            </Tooltip>\n          </div>}\n        >\n          <UnorderedList>\n            <ListItem className=\"list-item\">\n              Jane's commitment store:\n              <UnorderedList nested className=\"unordered-nested-list\">\n                <ListItem className=\"nested-list-item\">\n                  healthy(X):-cuisine(X,mediterranean).\n                </ListItem>\n                <ListItem className=\"nested-list-item\">\n                  healthy(X):-vegetables(X).\n                </ListItem>\n                <ListItem className=\"nested-list-item\">\n                  vegetables(X):-cuisine(X,thai).\n                </ListItem>\n                <ListItem className=\"nested-list-item\">\n                  cuisine(thaiPalace,thai).\n                </ListItem>\n                <ListItem className=\"nested-list-item\">\n                  healthy(thaiPalace).\n                </ListItem>\n              </UnorderedList>\n            </ListItem>\n            <ListItem className=\"list-item\">\n              Harry's commitment store:\n              <UnorderedList nested className=\"unordered-nested-list\">\n                <ListItem className=\"nested-list-item\">\n                  healthy(thaiPalace).\n                </ListItem>\n                <ListItem className=\"nested-list-item\">\n                  healthy(X):-vegetables(X).\n                </ListItem>\n                <ListItem className=\"nested-list-item\">\n                  vegetables(X):-cuisine(X,thai).\n                </ListItem>\n                <ListItem className=\"nested-list-item\">\n                  cuisine(thaiPalace,thai).\n                </ListItem>\n              </UnorderedList>\n            </ListItem>\n          </UnorderedList>\n        </AccordionItem>\n      </Accordion>\n    );\n  }\n}\n\nexport default DemoDialogue;\n","import React, { Component } from 'react';\n\nimport DemoDialogue from './DemoDialogue';\n\nimport './Home.css'\n\nclass Home extends Component {\n  render() {\n    return (\n      <div>\n        <div className=\"bx--row\">\n          <div className=\"bx--offset-md-1 bx--col-md-10 bx--offset-xl-2 bx--col-xl-8\">\n            <div className=\"heading\"></div>\n            <h2 className=\"heading\">Welcome</h2>\n          </div>\n        </div>\n        <div className=\"bx--row\">\n          <div className=\"bx--offset-md-1 bx--col-md-10 bx--offset-xl-2 bx--col-xl-8\">\n            <p>\n              Diners' Discourse lets you customise and generate persuasion and deliberation dialogues\n              that are set in a classic restaurant selection scenario.\n              The application also allows you to observe the differences between the two types side-by-side\n              and to peek into the commitment stores of the participating agents at any point.\n            </p>\n            <p className=\"not-first\">\n              To learn more about the creation of Diners' Discourse\n              and to gain more insight into dialogue protocols, go to \"Background\".\n            </p>\n            <p className=\"not-first\">\n              To start generating your own dialogues, go to \"Generate\".\n            </p>\n          </div>\n        </div>\n        <div className=\"bx--row\">\n          <div className=\"bx--offset-md-1 bx--col-md-10 bx--offset-xl-2 bx--col-xl-8\">\n            <div className=\"heading\"></div>\n            <h2 className=\"heading\">Demo Dialogue</h2>\n          </div>\n        </div>\n        <div className=\"bx--row\">\n          <div className=\"bx--offset-md-1 bx--col-md-10 bx--offset-xl-2 bx--col-xl-8\">\n            <p className=\"description\">\n              Check out a snippet of a persuasion dialogue below.\n              You can see how the commitment stores of the agents evolve\n              as they carry out various speech acts by expanding the accordion components.\n              Hover over the tooltips for further explanations.\n            </p>\n          </div>\n        </div>\n        <div className=\"bx--row\">\n          <div className=\"bx--offset-md-1 bx--col-md-10 bx--offset-xl-2 bx--col-xl-8\">\n            <DemoDialogue />\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default Home;\n","import React, { Component } from 'react';\nimport { Button, ContentSwitcher, Link, Switch } from 'carbon-components-react';\n\nimport Background from './Background';\nimport Generate from './Generate';\nimport Home from './Home';\n\nimport './App.css';\n\nclass App extends Component {\n  constructor() {\n    super();\n\n    this.state = {\n      switchIndex: 0\n    };\n\n    this.onChange = this.onChange.bind(this);\n  }\n\n  onChange(event) {\n    this.setState({\n      switchIndex: event.index\n    });\n  }\n\n  render() {\n    return (\n      <div>\n        <div className=\"announcement\">\n          <p className=\"announcement\">Check out the source code of this website.</p>\n          <Button small className=\"announcement\" kind=\"tertiary\" onClick={() => window.open('https://github.com/yankirchev/diners-discourse', '_blank').focus()}>\n            Go to GitHub\n          </Button>\n        </div>\n        <div className=\"header\">\n          <div className=\"bx--grid\">\n            <div className=\"bx--row\">\n              <div className=\"bx--offset-md-1 bx--col-md-10 bx--offset-xl-2 bx--col-xl-8\">\n                <h1 className=\"header\">Diners' Discourse</h1>\n              </div>\n            </div>\n          </div>\n        </div>\n        <div className=\"bx--grid\">\n          <div className=\"bx--row\">\n            <div className=\"bx--offset-md-1 bx--col-md-10 bx--offset-xl-2 bx--col-xl-8\">\n              <ContentSwitcher className=\"content-switcher\" onChange={this.onChange}>\n                <Switch name=\"home\" text=\"Home\" />\n                <Switch name=\"background\" text=\"Background\" />\n                <Switch name=\"generate\" text=\"Generate\" />\n              </ContentSwitcher>\n            </div>\n          </div>\n          <div hidden={this.state.switchIndex !== 0}>\n            <Home />\n          </div>\n          <div hidden={this.state.switchIndex !== 1}>\n            <Background />\n          </div>\n          <div hidden={this.state.switchIndex !== 2}>\n            <Generate />\n          </div>\n        </div>\n        <footer className=\"bx--footer bx--footer--bottom-fixed footer\">\n          <div className=\"bx--footer-info\">\n            <div className=\"bx--footer-info__item\">\n              <p className=\"bx--footer-label\">Copyright &copy; Yanko Kirchev 2019</p>\n              <Link href=\"mailto:yankirchev.dinersdiscourse@gmail.com\">Contact the author</Link>\n            </div>\n            <div className=\"bx--footer-info__item\">\n              <p className=\"bx--footer-label\">Powered by Carbon Components (React)</p>\n              <Link href=\"https://www.carbondesignsystem.com\">Carbon Design System</Link>\n            </div>\n            <div className=\"bx--footer-info__item\">\n              <p className=\"bx--footer-label\">Powered by Tau Prolog</p>\n              <Link href=\"http://tau-prolog.org\">Tau Prolog</Link>\n            </div>\n          </div>\n        </footer>\n      </div>\n    );\n  }\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nimport './index.css';\n\nReactDOM.render(<App />, document.getElementById('root'));\nserviceWorker.unregister();\n"],"sourceRoot":""}